<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[blog.nojaf.com]]></title><description><![CDATA[Thoughts, stories and ideas on coding, web &amp; .NET development and other things.]]></description><link>https://blog.nojaf.com</link><generator>GatsbyJS</generator><lastBuildDate>Fri, 15 Jan 2021 14:08:33 GMT</lastBuildDate><item><title><![CDATA[Gitpod & Snowpack]]></title><description><![CDATA[Hey all, For my F# Advent calendar entry of 2020 I messed around with Gitpod, Snowpack & Fable.
You can find the result in this video: Take…]]></description><link>https://blog.nojaf.com/fs-advent-2020-gitpod-snowpack-fable/</link><guid isPermaLink="false">https://blog.nojaf.com/fs-advent-2020-gitpod-snowpack-fable/</guid><pubDate>Tue, 15 Dec 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Hey all,&lt;/p&gt;
&lt;p&gt;For my F# Advent calendar entry of 2020 I messed around with &lt;a href=&quot;https://gitpod.io/&quot;&gt;Gitpod&lt;/a&gt;, &lt;a href=&quot;https://www.snowpack.dev/&quot;&gt;Snowpack&lt;/a&gt; &amp;#x26; &lt;a href=&quot;https://fable.io/&quot;&gt;Fable&lt;/a&gt;.&lt;br /&gt;
You can find the result in this video:&lt;/p&gt;
&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 56.25%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;iframe src=&quot;https://www.youtube.com/embed/yqOWx-6FXAs&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write;encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen style=&quot; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot;&gt;&lt;/iframe&gt; &lt;/div&gt;
&lt;p&gt;Take care everyone!&lt;/p&gt;
&lt;p&gt;Cheers,&lt;/p&gt;
&lt;p&gt;nojaf&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Photo by &lt;a href=&quot;https://unsplash.com/@anniespratt?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText&quot;&gt;Annie Spratt&lt;/a&gt; on &lt;a href=&quot;https://unsplash.com/s/photos/polar-bear?utm_source=unsplash&amp;amp;utm_medium=referral&amp;amp;utm_content=creditCopyText&quot;&gt;Unsplash&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Fantomas configuration file]]></title><description><![CDATA[Hi all, The cat’s out of the bag: Fantomas now has support for configuration files.
This means you can override the default settings using a…]]></description><link>https://blog.nojaf.com/fantomas-configuration-file/</link><guid isPermaLink="false">https://blog.nojaf.com/fantomas-configuration-file/</guid><pubDate>Fri, 10 Jan 2020 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Hi all,&lt;/p&gt;
&lt;p&gt;The cat’s out of the bag:&lt;/p&gt;
&lt;blockquote class=&quot;twitter-tweet&quot;&gt;&lt;p lang=&quot;en&quot; dir=&quot;ltr&quot;&gt;New version of &lt;a href=&quot;https://twitter.com/IonideProject?ref_src=twsrc%5Etfw&quot;&gt;@IonideProject&lt;/a&gt; is out - it updates Fantomas support to the latest version including support for Fantomas configuration file (&lt;a href=&quot;https://t.co/Pw3TqQ4kYe&quot;&gt;https://t.co/Pw3TqQ4kYe&lt;/a&gt;)&lt;br&gt;&lt;br&gt;Props to &lt;a href=&quot;https://twitter.com/verdonckflorian?ref_src=twsrc%5Etfw&quot;&gt;@verdonckflorian&lt;/a&gt; and &lt;a href=&quot;https://twitter.com/ChetHusk?ref_src=twsrc%5Etfw&quot;&gt;@ChetHusk&lt;/a&gt; for working on this. &lt;a href=&quot;https://twitter.com/hashtag/fsharp?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#fsharp&lt;/a&gt; &lt;a href=&quot;https://twitter.com/hashtag/toolingAdventures?src=hash&amp;amp;ref_src=twsrc%5Etfw&quot;&gt;#toolingAdventures&lt;/a&gt;&lt;/p&gt;&amp;mdash; Krzysztof Cieślak (@k_cieslak) &lt;a href=&quot;https://twitter.com/k_cieslak/status/1215239179472375808?ref_src=twsrc%5Etfw&quot;&gt;January 9, 2020&lt;/a&gt;&lt;/blockquote&gt; &lt;script async src=&quot;https://platform.twitter.com/widgets.js&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt;
&lt;p&gt;Fantomas now has support for configuration files.
This means you can override the default settings using a JSON file.
Check out &lt;a href=&quot;https://github.com/fsprojects/fantomas/blob/master/docs/Documentation.md#--config-path-to-file-or-folder&quot;&gt;the documentation&lt;/a&gt; for more information.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 483px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 57.34989648033127%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC0klEQVQozx2Sy28bBRjE/S9QgXioUZSSkDo1fsf22s7u2t6NnbW9Lz/W9nr92vVTSZumaRsqED2AOPTSC0hwQHBCqiLBiX/vx4rTN4fRaGa+iXyeTiDoCoanUx80UbsCJ7LP/vk92d5f5J0PZPr3iN4/5Jy/iVr/kmq+wZvIyFaNJ7USj6U0+/kYD2JfEfkkmUSyqjT6IcHMY1o5ur08RieH76shFmgbSeaTMt2BSKFRwnSqdAZVNFukeFEgr6Y5KiV5eBoj8kQW0EY29mKE6WqMPAnZWCK6H+hd3dMK/kRxf6Xt/87Z4DfS9h+0hnehWIEjMR+KCXRsAd0qkKlliDzMJClrAgkpQaUl4rg1Oo5Bqx/Q8dY40zXufIc7moYOZ9RMj3ZPZzkVqTVPkerJEMs8X2shp0rksBAnKsQQainycopiNc2FlkA3UnTNBON+FseK8zyo8M2uwZVf+b+SZ1uDu2uTgSuxmKtcLetoRpnIQS5OVhGYbz0ubwLWux7zmcab2wU7v0XgG2w2PYKJxqutyaXfZOapLGYNnm0u2K1UHKdEMA177YaCiYpMSaszWgxZbQfMF22WCyWMIVCv7qGox4iVA3LZB0zaj5gZRwS9FPN+Aa+Xpqsf06wfsvRKoQGJiGJZdCZ9nIHB0re53V5gmmPi6ltS6muOpVv2hBu+FF+RqX9Lsf0Thjnj6aTAaiwwtGIYWjS8cVaTUyJi2+BpGO/1C5eX1y6XSx256ZA9v0Xt39ENfqDtvaVo3KD07rAm39Mdzbmei7zcNPjuxuYqUFlPzvCHCSL1lhL2NuXF7ZrVeoy/dBCaAyT7knI4H6mzQe34xMsNksXz8Fk9audlBu0YfT2OokQRxUPG5te4epRIVlbDeYzQ3SGK3aemN3hcmvPF2c+c6u9pjn+hbL/npPGOo+qP7Ivv+Oi4RSHzMdnsHgfRT3kU/QypdBD2e8J/fn2mjRmLoLgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Fantomas configuration via console&quot;
        title=&quot;Fantomas configuration via console&quot;
        src=&quot;/static/e5d569f8790b13fd330d0627c652a8e9/f3ddf/nojaf-fantomas-configuration-console.png&quot;
        srcset=&quot;/static/e5d569f8790b13fd330d0627c652a8e9/00d96/nojaf-fantomas-configuration-console.png 148w,
/static/e5d569f8790b13fd330d0627c652a8e9/0b23c/nojaf-fantomas-configuration-console.png 295w,
/static/e5d569f8790b13fd330d0627c652a8e9/f3ddf/nojaf-fantomas-configuration-console.png 483w&quot;
        sizes=&quot;(max-width: 483px) 100vw, 483px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;In this post I wish to answer a couple of small questions about the Fantomas configuration files.&lt;/p&gt;
&lt;h2&gt;JSON schema?&lt;/h2&gt;
&lt;p&gt;We’ve added a JSON schema definition to &lt;a href=&quot;http://json.schemastore.org/fantomas&quot;&gt;http://schemastore.org&lt;/a&gt;.
So to get intellisense in most editors, you can add &lt;code class=&quot;language-text&quot;&gt;$schema&lt;/code&gt; to the configuration file.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;$schema&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://json.schemastore.org/fantomas&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;KeepNewlineAfter&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;IndentOnTryWith&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Ionide integration?&lt;/h2&gt;
&lt;p&gt;When using the latest Ionide version (4.4.3 and higher), your configuration will be picked up due to the integration of Fantomas via &lt;a href=&quot;https://github.com/fsharp/FsAutoComplete/&quot;&gt;FSAutocomplete&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If something doesn’t work out, you can enable verbose logging in VSCode.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;FSharp.verboseLogging&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then you can see warnings or errors in the output window.
A fallback to the default configuration will happen when the parsing failed.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 35.12841756420878%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABWUlEQVQoz1VQy1KDQBDk/79ArcSD3rxY5Uktc/YDzFvLCgIJLIQkYIB9QNtD1NKt6u2e586Op1SCRClk2wwpsUkSBGGIMIrIASJyQt8mjpGmCoq5Yse0BUl80n7gI2SdZ51Bsc1xSHM0uWAHW9WwdQ3XNOg6wBiLRlvUNdkYOOfo7/7BtS39LbyWokwUtsEGu48IRbA+NdO6hxxJtkwuSo1DUaJtu97f/YFc0tgzfNFYywJ3eqVjMW3NZtroniVHfB1jMkBLXfHr/Y+yDLosvyd08BSd7z53tYmxjhWCNSflFNluD4mlXEF+KFBpNuUUTiYmN8zRRMOYlhgbGsuGpf+KZDlFupggnr1AkY/hCtu3ObLlrNdV5APHPVAVwOf+BNGC44FLrvBzvOHjBIOnOc4fxoTo2a998Tjt9XC06PmSLDln92MMWHc1muJ6NMHN8wp3sz1uxzm+AOSYDWk9cDzgAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Warning in Ionide&quot;
        title=&quot;Warning in Ionide&quot;
        src=&quot;/static/c5a10a2954ab354479da04a9d7b1a773/799d3/nojaf-fantomas-configuration-ionide-warning.png&quot;
        srcset=&quot;/static/c5a10a2954ab354479da04a9d7b1a773/00d96/nojaf-fantomas-configuration-ionide-warning.png 148w,
/static/c5a10a2954ab354479da04a9d7b1a773/0b23c/nojaf-fantomas-configuration-ionide-warning.png 295w,
/static/c5a10a2954ab354479da04a9d7b1a773/799d3/nojaf-fantomas-configuration-ionide-warning.png 590w,
/static/c5a10a2954ab354479da04a9d7b1a773/2a3d6/nojaf-fantomas-configuration-ionide-warning.png 885w,
/static/c5a10a2954ab354479da04a9d7b1a773/ae92f/nojaf-fantomas-configuration-ionide-warning.png 1180w,
/static/c5a10a2954ab354479da04a9d7b1a773/e7796/nojaf-fantomas-configuration-ionide-warning.png 1207w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;Room for improvement&lt;/h3&gt;
&lt;p&gt;At the time of writing, the configuration file is &lt;a href=&quot;https://github.com/fsharp/FsAutoComplete/blob/52779750677d20b13ebcacc64a212cbc2a87fa7d/src/FsAutoComplete/FsAutoComplete.Lsp.fs#L982&quot;&gt;not cached in FSAutocomplete&lt;/a&gt;.
It could be kept in memory and updated when a configuration file changes.
Feel free to submit a pull request to FSAutocomplete.&lt;/p&gt;
&lt;h2&gt;Why a beta version?&lt;/h2&gt;
&lt;p&gt;The main reason this is not an official release just yet is due to the fact that we want to be sure this works out for everyone.
So &lt;strong&gt;please provide us feedback&lt;/strong&gt; if you encounter any problems whatsoever.&lt;/p&gt;
&lt;h2&gt;Rider support?&lt;/h2&gt;
&lt;p&gt;If the solution we have in mind appears to be working out nicely for Ionide users, I will submit a pull request to &lt;a href=&quot;https://github.com/JetBrains/fsharp-support&quot;&gt;JetBrains/fsharp-support&lt;/a&gt;.
It might involved some more thinking to find the best approach, however I’m confident in collaboration with the team we can find a way.&lt;/p&gt;
&lt;p&gt;Please keep in mind that Fantomas updates to Rider are linked to their release cadence.&lt;/p&gt;
&lt;h2&gt;Road to adoption?&lt;/h2&gt;
&lt;p&gt;This year my personal aspiration to &lt;strong&gt;increase the adoption of Fantomas&lt;/strong&gt;.
Both in terms of users and people who submit pull requests.&lt;/p&gt;
&lt;p&gt;I have some plans and ideas for this. Unfortunately, I’m unable to share anything just yet.
Stay tuned for more!&lt;/p&gt;
&lt;p&gt;Please o please report any issues you encounter using &lt;a href=&quot;https://jindraivanek.gitlab.io/fantomas-ui/#?fantomas=preview&quot;&gt;our online tool&lt;/a&gt;.
Or post any suggestions on &lt;a href=&quot;https://github.com/fsprojects/fantomas/issues&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Fantomas can only improve when feedback is presented&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Take care everyone!&lt;/p&gt;
&lt;p&gt;Cheers,&lt;/p&gt;
&lt;p&gt;nojaf&lt;/p&gt;
&lt;p&gt;Photo by &lt;a style=&quot;background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px&quot; href=&quot;https://unsplash.com/@krutainis?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; title=&quot;Download free do whatever you want high-resolution photos from Ivars Krutainis&quot;&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; style=&quot;height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white&quot; viewBox=&quot;0 0 32 32&quot;&gt;&lt;title&gt;unsplash-logo&lt;/title&gt;&lt;path d=&quot;M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;Ivars Krutainis&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Using Create React App with Fable]]></title><description><![CDATA[Introduction 2019 has been a great year for me for all things F# related! I helped out with the organization of FableConf in Antwerp, gave a…]]></description><link>https://blog.nojaf.com/using-create-react-app-with-fable/</link><guid isPermaLink="false">https://blog.nojaf.com/using-create-react-app-with-fable/</guid><pubDate>Tue, 10 Dec 2019 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;2019 has been a great year for me for all things F# related! I helped out with the organization of &lt;a href=&quot;https://axxes.com/en/net-2-en/axxes-proud-host-of-fableconf-2019/&quot;&gt;FableConf in Antwerp&lt;/a&gt;, gave a &lt;a href=&quot;https://blog.jetbrains.com/dotnet/2019/07/24/webinar-from-fsharp-to-javascript-with-fable/&quot;&gt;webinar at JetBrains&lt;/a&gt; and was able to release &lt;a href=&quot;https://axxes.com/en/net/fantomas-3-0-over-and-above/&quot;&gt;Fantomas 3.0&lt;/a&gt;.
To wrap up the decade I’m writing this post as part of the &lt;strong&gt;&lt;a href=&quot;https://sergeytihon.com/2019/11/05/f-advent-calendar-in-english-2019/&quot;&gt;F# Advent Calendar in English 2019&lt;/a&gt;&lt;/strong&gt;.&lt;br/&gt;
I had fun &lt;a href=&quot;/2018/12/17/writing-a-vscode-extension-with-fable-2-1/&quot;&gt;last year&lt;/a&gt; and I wish to continue this trend.&lt;/p&gt;
&lt;h3&gt;To Feliz or not to Feliz&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://zaid-ajaj.github.io/Feliz/&quot;&gt;Feliz&lt;/a&gt; has been receiving some traction in the community and at one-point Zaid asked me what I thought about it.
My reply was, well it’s not for everybody 😅.
In this blog post I’m going to explore yet another alternative of creating views in Elmish, by using React as is.&lt;/p&gt;
&lt;h3&gt;TL;DR&lt;/h3&gt;
&lt;p&gt;In blog post we are going to combine &lt;a href=&quot;https://fable.io/&quot;&gt;Fable&lt;/a&gt; with &lt;a href=&quot;https://create-react-app.dev/&quot;&gt;Create React App&lt;/a&gt;.
Writing our &lt;strong&gt;views with vanilla React&lt;/strong&gt; components and our &lt;strong&gt;logic in F#&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Capital Guardian&lt;/h2&gt;
&lt;p&gt;Recently I’ve had the need to track where my money is going. Or as we say in Belgium, there is a hole in my wallet somehow.
Obviously, using an existing online tool is too easy so I decided to build something myself.&lt;/p&gt;
&lt;p&gt;The domain is a bit more complex than you would think at first glance. The basics are simple, I earn money and I spend it.
Capture all those transactions and you know the balance. However, some expenses are recurring or sometimes you want to spread an bigger expense over multiple months.
Anyway, we aren’t going to cover the entire application, but you can sort of see where this could go.&lt;br /&gt;
It is technically challenging enough to serve as a good exercise in domain modeling and &lt;strong&gt;event sourcing&lt;/strong&gt;.&lt;/p&gt;
&lt;h3&gt;Architecture&lt;/h3&gt;
&lt;p&gt;Since we are doing event sourcing I’m eager to use &lt;strong&gt;Azure Functions&lt;/strong&gt; and &lt;a href=&quot;https://github.com/Dzoukr/CosmoStore&quot;&gt;Cosmo store&lt;/a&gt; for the back-end.
Nonetheless, this post is about the front-end and we will focus solely on that.&lt;/p&gt;
&lt;h2&gt;Create React App and Fable&lt;/h2&gt;
&lt;p&gt;As mentioned, the first thing we want to do is scaffold a new project with Create React App.&lt;br /&gt;
I’m a Yarn guy, so:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;yarn create react-app capital-guardian&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Create React Application&lt;/em&gt; has amazing documentation and the key takeaway here is that I don’t have to do any crazy webpack shizzle.
It just works © and I don’t have to maintain anything. &lt;/p&gt;
&lt;h3&gt;Compiling FSharp&lt;/h3&gt;
&lt;p&gt;There are a few moving pieces in setting up the front-end development experience.
The F# files should be compiled to ES6 JavaScript before the React development server starts.
We can solve this problem using a FAKE script.&lt;/p&gt;
&lt;h3&gt;Paket&lt;/h3&gt;
&lt;p&gt;First let’s install some .NET Core 3 tools.
Let’s use the new and &lt;a href=&quot;http://www.navision-blog.de/blog/2019/12/02/announcing-paket-6-alpha/&quot;&gt;shiny Paket 6&lt;/a&gt;!
Paket is useful in this case because we are using FAKE and will compile &lt;a href=&quot;https://axxes.com/en/net/compiling-f-scripts-with-fable-2-2/&quot;&gt;F# scripts with Fable&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;dotnet new tool-manifest&lt;/p&gt;
&lt;p&gt;dotnet tool install paket&lt;/p&gt;
&lt;p&gt;dotnet tool install fake-cli&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Setup our .NET dependencies:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;dotnet paket init&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Change &lt;code class=&quot;language-text&quot;&gt;paket.dependencies&lt;/code&gt; to&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;group client
storage:none
source: https://api.nuget.org/v3/index.json
framework: netstandard2.0

nuget Fable.React
nuget Fable.Elmish
nuget Fable.Promise
nuget Fable.Fetch
nuget Thoth.Json

group build
storage:none
source: https://api.nuget.org/v3/index.json
framework: netstandard2.0
nuget Fake.Core.Target
nuget Fake.IO.FileSystem
nuget Fake.JavaScript.Yarn
nuget Fake.DotNet.Paket
nuget Fantomas&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And install everything with:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;dotnet paket install&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;FAKE&lt;/h3&gt;
&lt;p&gt;Next, create a &lt;code class=&quot;language-text&quot;&gt;build.fsx&lt;/code&gt; script:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token preprocessor property&quot;&gt;#r &lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;paket: groupref build //&quot;&lt;/span&gt;
&lt;span class=&quot;token preprocessor property&quot;&gt;#load &lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.fake/build.fsx/intellisense.fsx&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fake&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Core
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fake&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;TargetOperators
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fake&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;DotNet
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fake&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IO
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fake&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IO&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FileSystemOperators
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fake&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IO&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Globbing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Operators
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fake&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JavaScript
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; System
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fantomas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FakeHelpers
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fantomas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FormatConfig

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; clientPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getFullName &lt;span class=&quot;token string&quot;&gt;&quot;./&quot;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; setYarnWorkingDirectory &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Yarn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;YarnParams&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; args &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; WorkingDirectory &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; clientPath &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;module&lt;/span&gt; Paket &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; runCmd cmd args &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        CreateProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fromRawCommand cmd args
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Proc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; ignore

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; paket args &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; runCmd &lt;span class=&quot;token string&quot;&gt;&quot;dotnet&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;paket&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; ``generate load script``&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; paket &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;generate-load-scripts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-f&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;netstandard2.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;-t&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fsx&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

Target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create &lt;span class=&quot;token string&quot;&gt;&quot;Clean&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
    Shell&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rm_rf &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;clientPath &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;.fable&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    Shell&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rm_rf &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;clientPath &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;src&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;bin&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

Target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create &lt;span class=&quot;token string&quot;&gt;&quot;Yarn&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; Yarn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;installPureLock setYarnWorkingDirectory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

Target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create &lt;span class=&quot;token string&quot;&gt;&quot;Paket&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
    Paket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;restore id
    Shell&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;rm_rf &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.paket&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;load&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    Paket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;``generate load script``&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

Target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create &lt;span class=&quot;token string&quot;&gt;&quot;Build&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; Yarn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exec &lt;span class=&quot;token string&quot;&gt;&quot;build&quot;&lt;/span&gt; setYarnWorkingDirectory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token string&quot;&gt;&quot;Clean&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Paket&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Yarn&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Build&quot;&lt;/span&gt;

Target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;runOrDefault &lt;span class=&quot;token string&quot;&gt;&quot;Build&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As a first version of our build script we can install our dependencies and build our application.
Notice the little helper module to &lt;a href=&quot;https://fsprojects.github.io/Paket/paket-generate-load-scripts.html&quot;&gt;generate the load script&lt;/a&gt;.
Keep in mind that nothing Fable related is in place yet.&lt;/p&gt;
&lt;h3&gt;Fable&lt;/h3&gt;
&lt;p&gt;Install &lt;code class=&quot;language-text&quot;&gt;fable-splitter&lt;/code&gt; &amp;#x26; &lt;code class=&quot;language-text&quot;&gt;fable-compiler&lt;/code&gt; and add a script to our package.json to start the splitter.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;capital-guardian&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0.1.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;private&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;dependencies&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;fable-compiler&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^2.4.11&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;fable-splitter&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^2.1.11&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^16.12.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react-dom&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^16.12.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react-scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;3.2.0&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts start&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;build&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts build&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;test&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts test&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;eject&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts eject&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;fable&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fable-splitter fsharp/Main.fsx -o src/bin&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;prebuild&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn fable&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then create &lt;code class=&quot;language-text&quot;&gt;Main.fsx&lt;/code&gt; in a &lt;code class=&quot;language-text&quot;&gt;fsharp&lt;/code&gt; folder.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token preprocessor property&quot;&gt;#load &lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;../.paket/load/netstandard2.0/client/client.group.fsx&quot;&lt;/span&gt;

printfn &lt;span class=&quot;token string&quot;&gt;&quot;Fable compiled this&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Running &lt;code class=&quot;language-text&quot;&gt;yarn fable&lt;/code&gt; now compiles the F# to &lt;code class=&quot;language-text&quot;&gt;src/bin&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;yarn add fable-splitter fable-compiler&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Add &lt;code class=&quot;language-text&quot;&gt;import &amp;#39;./bin/Main&amp;#39;;&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;App.js&lt;/code&gt; and start the development server using &lt;code class=&quot;language-text&quot;&gt;yarn start&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Adjust Create React App&lt;/h3&gt;
&lt;p&gt;And just like that:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f4dcb41061c0d3a51325cd22bb7f9714/bcbcb/cra-failed-to-compile.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 20.38647342995169%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAiklEQVQY03WQ4Q7DIAiEff/n7NbqrNq1KprpDWn2Z2kxXy6QwIGK7ApaHUi/8EkZI3rvAv5UHmtr7RaVfEBYtHBYh8jDRy06j53NRn4MQ7chGc/mG1pMl/RMUG9u8vMCP82w05N5iG7aII6Bw0SuCMjGibb9uIYvVLVWlFJQqJzKORHJ+nfx+5Irvn/tNxYSCqgOAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Create React App failed to compile&quot;
        title=&quot;Create React App failed to compile&quot;
        src=&quot;/static/f4dcb41061c0d3a51325cd22bb7f9714/799d3/cra-failed-to-compile.png&quot;
        srcset=&quot;/static/f4dcb41061c0d3a51325cd22bb7f9714/00d96/cra-failed-to-compile.png 148w,
/static/f4dcb41061c0d3a51325cd22bb7f9714/0b23c/cra-failed-to-compile.png 295w,
/static/f4dcb41061c0d3a51325cd22bb7f9714/799d3/cra-failed-to-compile.png 590w,
/static/f4dcb41061c0d3a51325cd22bb7f9714/2a3d6/cra-failed-to-compile.png 885w,
/static/f4dcb41061c0d3a51325cd22bb7f9714/bcbcb/cra-failed-to-compile.png 1035w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Well &lt;em&gt;Create React Application&lt;/em&gt; does JavaScript linting as well and it is rejecting the compiled F# code.
Or at least a part of the &lt;code class=&quot;language-text&quot;&gt;Fable.Core&lt;/code&gt; library in this case.
We want to tell the linter that it should ignore the &lt;code class=&quot;language-text&quot;&gt;src/bin&lt;/code&gt; folder.&lt;/p&gt;
&lt;p&gt;Create an &lt;code class=&quot;language-text&quot;&gt;.eslintignore&lt;/code&gt; file and add &lt;code class=&quot;language-text&quot;&gt;src/bin/**&lt;/code&gt; to it.
For the ignore file to be picked up add an &lt;code class=&quot;language-text&quot;&gt;.env&lt;/code&gt; file with &lt;code class=&quot;language-text&quot;&gt;EXTEND_ESLINT=true&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bf4e2598e89f1a3b43f5c1898c69e530/0d910/fable-compiled-this.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.55855855855856%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB60lEQVQoz42TW08aURDH/RA15SIsy7pnFxSWXQq7IJcgoFWrRmO0BjUqKqLVxF7TS5o0fdOksan60O9nn1t9E5K/cw5qsLWBTSazuzP7m//MnO3RBp+Amx6yIE9PQlqcg395AdLzOUiV+dbz6iKU4SJ0LdbKvbFwNAmPpOHw6Bi//1zi/PwXem5hqp2B+/0u9IG4gHle19C3uwZ5ZgpKsYTg+DhCzLgHHDBsuP0M376fgl8XF5e3QBNqKgvPmzr6cwV43tbx+OtLuD7tw7tfRWB2Gkp55B+FHOjyqTg5+ymAzWazTSEHvtuBtDQP94cX6D3+iEc/Pgsgt+Do6INAdxvw6qrxt8JtMMuBd68K15cDKlCHr7YiYN0obDQabQqd1gxZPCUW0bezBt/WipihPDkB+dkEQirNMNINUCeF6Ry8r2rwr1eEKuE3luDbXIa/WhEd8MIdFfKAFrbQT5XlUhkB2ij3wug+QK0qBGNqFIxOgMi/8Q8rpOBgzIGVyMKM2oibaRiRJGJRehdLwTIcmCZ5O0959h3sv0BG6oz4EIbyI0hmisgOjyGVLcHJlJDOlYXZ/H3hKcxEBjy/c8tUVaVNM74c+kDJFxCkP0MmU2kUjJ8CHg932bLeNmidABodHWG0cT2SuBfv1PI1AFLKUIlIiy4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Fable compiled this&quot;
        title=&quot;Fable compiled this&quot;
        src=&quot;/static/bf4e2598e89f1a3b43f5c1898c69e530/799d3/fable-compiled-this.png&quot;
        srcset=&quot;/static/bf4e2598e89f1a3b43f5c1898c69e530/00d96/fable-compiled-this.png 148w,
/static/bf4e2598e89f1a3b43f5c1898c69e530/0b23c/fable-compiled-this.png 295w,
/static/bf4e2598e89f1a3b43f5c1898c69e530/799d3/fable-compiled-this.png 590w,
/static/bf4e2598e89f1a3b43f5c1898c69e530/2a3d6/fable-compiled-this.png 885w,
/static/bf4e2598e89f1a3b43f5c1898c69e530/ae92f/fable-compiled-this.png 1180w,
/static/bf4e2598e89f1a3b43f5c1898c69e530/0d910/fable-compiled-this.png 1221w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Great! At this point running &lt;code class=&quot;language-text&quot;&gt;dotnet fake run build.fsx&lt;/code&gt; will compile the F# and create a production build of Create React App.&lt;/p&gt;
&lt;h3&gt;Watch mode&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;fable-splitter&lt;/code&gt; has a watch mode, however using this can lead some chicken and egg type of problem.
If the F# has never been compiled and &lt;em&gt;Create React Application&lt;/em&gt; is started it will fail. A possible solution could be to compile the F#, start &lt;em&gt;Create React Application&lt;/em&gt; and then compile F# in watch mode.
Unfortunately, this is an expensive operation (we would start the Fable daemon twice). A workaround can be created in our build script.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;Target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create &lt;span class=&quot;token string&quot;&gt;&quot;Watch&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; fableOutput output &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        Trace&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tracefn &lt;span class=&quot;token string&quot;&gt;&quot;%s&quot;&lt;/span&gt; output
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; output &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fable: Watching...&quot;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
            Yarn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exec &lt;span class=&quot;token string&quot;&gt;&quot;start&quot;&lt;/span&gt; setYarnWorkingDirectory

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; fableError output &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Trace&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;traceErrorfn &lt;span class=&quot;token string&quot;&gt;&quot;\n%s\n&quot;&lt;/span&gt; output

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; compileFable &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        CreateProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fromRawCommand Yarn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;defaultYarnParams&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;YarnFilePath &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;fable&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;--watch&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; CreateProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;withWorkingDirectory clientPath
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; CreateProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;redirectOutput
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; CreateProcess&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;withOutputEventsNotNull fableOutput fableError
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Proc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startAndAwait
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Async&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Ignore

    Async&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RunSynchronously compileFable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token string&quot;&gt;&quot;Clean&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Paket&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Yarn&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Build&quot;&lt;/span&gt;

&lt;span class=&quot;token string&quot;&gt;&quot;Paket&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Yarn&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Watch&quot;&lt;/span&gt;

Target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;runOrDefault &lt;span class=&quot;token string&quot;&gt;&quot;Build&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Admittedly this is a bit of hack, first we start the splitter process and read all the output.
If the output says &lt;code class=&quot;language-text&quot;&gt;fable: Watching...&lt;/code&gt;, it means the initial JavaScript was emitted (to &lt;code class=&quot;language-text&quot;&gt;src/bin&lt;/code&gt;) and will continue to watch our F# files.
Once we have that initial JavaScript output, we can start &lt;em&gt;Create React Application&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Any changes to either &lt;code class=&quot;language-text&quot;&gt;*.js&lt;/code&gt; or  &lt;code class=&quot;language-text&quot;&gt;*.fsx&lt;/code&gt; files will trigger a browser reload and this provides us a rich developer experience.&lt;/p&gt;
&lt;h2&gt;Enter Elmish&lt;/h2&gt;
&lt;p&gt;We wish to use &lt;code class=&quot;language-text&quot;&gt;Fable.Elmish&lt;/code&gt; for the purpose of what React Redux is commonly used for.&lt;/p&gt;
&lt;p&gt;position it like how &lt;a href=&quot;https://react-redux.js.org/&quot;&gt;React Redux&lt;/a&gt; works.
A top-level component will contain all the state and expose actions and selections via hooks.&lt;/p&gt;
&lt;h3&gt;React Context&lt;/h3&gt;
&lt;p&gt;First, we need a wrapper component that will start an &lt;strong&gt;Elmish program&lt;/strong&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token preprocessor property&quot;&gt;#load &lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;../.paket/load/netstandard2.0/client/client.group.fsx&quot;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Elmish
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; System
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;React
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Core

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Amount&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; double

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Year&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; int

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Month&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; int

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Guid

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;string&lt;/span&gt;
      Amount&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Amount&lt;/span&gt;
      Rule&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Id&lt;/span&gt; option
      Created&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RecurringRule&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Id &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; string &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; Amount

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ProcessedRecurringRule&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Id &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; Year &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; Month

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Event&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddExpense &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddIncome &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddRecurringIncomingRule &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RecurringRule&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddRecurringExpenseRule &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RecurringRule&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; CancelRecurringRule &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Id &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; DateTime&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; sampleEvents &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; rentRuleId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Guid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;92C3A64D-EE6E-4536-9A83-04682D21E3F2&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; wageId &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Guid&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;DD860AB1-5A07-49D7-831D-4723C1DB8284&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; now &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DateTime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Now

    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;AddRecurringExpenseRule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rentRuleId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Rent&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;800&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;AddRecurringIncomingRule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;wageId&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Wage&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      AddExpense
          &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Rent July&quot;&lt;/span&gt;
             Amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
             Rule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Some rentRuleId
             Created &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; now &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      AddIncome
          &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Wage July&quot;&lt;/span&gt;
             Amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
             Rule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Some wageId
             Created &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; now &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      AddExpense
          &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Movie night&quot;&lt;/span&gt;
             Amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
             Rule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; None
             Created &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; now &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      AddExpense
          &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Some beers with the boyz&quot;&lt;/span&gt;
             Amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
             Rule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; None
             Created &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; now &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddIncome &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddExpense &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; LoadEvents
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; EventsLoaded &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Event&lt;/span&gt; list
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; NetworkError &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;exn&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Events&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Event&lt;/span&gt; list
      IsLoading&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetchEvents&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token computation-expression keyword&quot;&gt;promise&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;do&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sleep &lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; sampleEvents
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; postEvents events _ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; printfn &lt;span class=&quot;token string&quot;&gt;&quot;Posting events %A to the backend&quot;&lt;/span&gt; events

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; init _ &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; IsLoading &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;true&lt;/span&gt;
      Events &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Cmd&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;OfPromise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;either fetchEvents &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; EventsLoaded NetworkError

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; update &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;msg&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Msg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    JS&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;log msg
    &lt;span class=&quot;token keyword&quot;&gt;match&lt;/span&gt; msg &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; EventsLoaded events &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; model &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;
              Events &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; events
              IsLoading &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Cmd&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;none
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddIncome &lt;span class=&quot;token keyword&quot;&gt;event&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddExpense &lt;span class=&quot;token keyword&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; model &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; Events &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AddIncome &lt;span class=&quot;token keyword&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Events &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Cmd&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ofSub &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postEvents &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;event&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; failwithf &lt;span class=&quot;token string&quot;&gt;&quot;Msg %A not implemented&quot;&lt;/span&gt; msg

&lt;span class=&quot;token annotation&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;NoComparison&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;]&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppContext&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Model&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Model&lt;/span&gt;
      Dispatch&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Dispatch&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Msg&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; defaultContextValue&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AppContext&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Fable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Core&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;JS&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;undefined
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; appContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ReactBindings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;createContext &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;defaultContextValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; ElmishCapture &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    FunctionComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Of
        &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; children&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ReactElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; loading&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ReactElementType&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; initialModel &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; fst

            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;IStateHook&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;AppContext&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
                Hooks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;useState
                    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; initialModel
                       Dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ignore &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; isMounted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Hooks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;useState &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; view model dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
                state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;update
                    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model
                       Dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dispatch &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

            Hooks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;useEffect
                &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
                    isMounted&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;update &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                    Program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mkProgram init update view &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;run&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;empty&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; isMounted&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current
            &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; contextProvider appContext state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; ReactBindings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;createElement &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;loading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

         &lt;span class=&quot;token string&quot;&gt;&quot;ElmishCapture&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; memoEqualsButFunctions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;ElmishCapture&lt;/code&gt; will start the &lt;code class=&quot;language-text&quot;&gt;Program&lt;/code&gt; once it has been mounted. Then the view function captures &lt;code class=&quot;language-text&quot;&gt;Model&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Dispatch&lt;/code&gt; in the component’s local state.
And that state is being passed as argument for the &lt;code class=&quot;language-text&quot;&gt;AppContext&lt;/code&gt;.
Check out &lt;a href=&quot;https://reactjs.org/docs/context.html&quot;&gt;React Context&lt;/a&gt; to learn more.&lt;/p&gt;
&lt;h3&gt;Usage in React&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./App.css&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./bin/Main&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; ElmishCapture &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./bin/Main&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Loading&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;loading...&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;App&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ElmishCapture&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;loading&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Loading&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation attr-equals&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;App&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        My App here
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;ElmishCapture&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; App&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Fable splitter compiles our code to &lt;code class=&quot;language-text&quot;&gt;src/bin&lt;/code&gt;, so now we can wrap the existing &lt;code class=&quot;language-text&quot;&gt;&amp;lt;App /&amp;gt;&lt;/code&gt; with &lt;code class=&quot;language-text&quot;&gt;ElmishCapture&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Hooks&lt;/h3&gt;
&lt;p&gt;How do we access the &lt;code class=&quot;language-text&quot;&gt;Model&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Dispatch&lt;/code&gt; directly? The answer here lies within &lt;a href=&quot;https://reactjs.org/docs/hooks-intro.html&quot;&gt;React Hooks&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Hooks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;useContext &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;appContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    model

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useDispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dispatch &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Hooks&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;useContext &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;appContext&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dispatch&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Dispatching messages&lt;/h4&gt;
&lt;p&gt;Be that as it may, we are not going to access the &lt;code class=&quot;language-text&quot;&gt;Model&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;Dispatch&lt;/code&gt;directly. Creating a &lt;code class=&quot;language-text&quot;&gt;Msg&lt;/code&gt; in JavaScript is hard because the output of the Fable isn’t really that nice.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; System

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Amount&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; double
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Year&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; int
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Month&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; int
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Guid

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;string&lt;/span&gt;
      Amount&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Amount&lt;/span&gt;
      Rule&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Id&lt;/span&gt; option
      Created&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;DateTime&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddIncome &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; AddExpense &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; myExpense &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    Msg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;AddExpense
          &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Movie night&quot;&lt;/span&gt;
             Amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
             Rule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; None
             Created &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DateTime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Now &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;is compiled to &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token computation-expression keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Union&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; declare&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Record &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; from &lt;span class=&quot;token string&quot;&gt;&quot;fable-library/Types.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token computation-expression keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; union&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; record&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; option&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; float64&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; string &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; from &lt;span class=&quot;token string&quot;&gt;&quot;fable-library/Reflection.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token computation-expression keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; now &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; from &lt;span class=&quot;token string&quot;&gt;&quot;fable-library/Date.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
export &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Transaction &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;declare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Test_Transaction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arg1&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arg2&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arg3&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arg4&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  this&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; arg1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  this&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; arg2&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  this&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Rule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; arg3&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  this&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Created &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; arg4&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Record&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
export &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; Transaction$&lt;span class=&quot;token function&quot;&gt;reflection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;record&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Test.Transaction&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Transaction&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; string&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Amount&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; float64&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Rule&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;System.Guid&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Created&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;System.DateTime&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
export &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Msg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;declare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Test_Msg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  Union&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;this&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tag&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fields&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Union&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
export &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; Msg$&lt;span class=&quot;token function&quot;&gt;reflection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;union&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Test.Msg&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Msg&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;AddIncome&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Transaction$&lt;span class=&quot;token function&quot;&gt;reflection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;AddExpense&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Transaction$&lt;span class=&quot;token function&quot;&gt;reflection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
export &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; myExpense &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Msg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;AddExpense&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Movie night&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;30&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;new Msg(1, &amp;quot;AddExpense&amp;quot;, new Transaction(&amp;quot;Movie night&amp;quot;, 30, null, now()));&lt;/code&gt; part isn’t really what we want to write ourselves here.
It would be better to encapsulate this in a hook.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useAddEntry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useDispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; amount&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Amount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; isIncome&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; today &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DateTime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Now

        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; entry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
              Amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;amount
              Rule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; None
              Created &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; today &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; msg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isIncome &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; AddIncome entry &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; AddExpense entry

        dispatch msg&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This hook returns function that can be called in function component.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;HomePage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; addEntry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useAddEntry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;onClick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addEntry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;My new entry&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                       &lt;span class=&quot;token string&quot;&gt;&quot;amount&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;35&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                                       &lt;span class=&quot;token string&quot;&gt;&quot;isIncome&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;imagine a form here...&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
              &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Yet there is another problem.
When we create a function in Fable that returns a function it doesn’t compile to what we think it would.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; a &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; b&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;compiles to&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;unitVar0&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So, when calling the function &lt;code class=&quot;language-text&quot;&gt;a&lt;/code&gt;, it will immediately be executed.
To overcome this we can wrap the lambda in a &lt;code class=&quot;language-text&quot;&gt;System.Func&amp;lt;_,_&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; a &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Func&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;_&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;_&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; b &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;so that it compiles to&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can write a little helper function to make everything less verbose:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;private&lt;/span&gt; f g &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Func&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;_&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; _&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;g&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useAddEntry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useDispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; amount&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Amount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; isIncome&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;bool&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; today &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; DateTime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Now

        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; entry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name
              Amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;amount
              Rule &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; None
              Created &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; today &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; msg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isIncome &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; AddIncome entry &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; AddExpense entry

        dispatch msg
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; f&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;Reading fragments of the Model&lt;/h4&gt;
&lt;p&gt;Accessing the &lt;code class=&quot;language-text&quot;&gt;Model&lt;/code&gt; is very straightforward.
We can project the &lt;code class=&quot;language-text&quot;&gt;Model&lt;/code&gt; in F# to match the shape we need for the presentation.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useEntries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Events &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; events &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; sortMapAndToArray &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Transaction&lt;/span&gt; seq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        input
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Seq&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sortBy &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; ai &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; ai&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Created&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Seq&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;map &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; ai &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ai&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Name
               amount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ai&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Amount &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Seq&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toArray

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; income &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        events
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Seq&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;choose &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;AddIncome&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ai&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Projections&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isInCurrentMonth ai&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Created&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; Some ai
            &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; None&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; sortMapAndToArray

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; expenses &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        events
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Seq&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;choose &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Event&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;AddExpense&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ae&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;when&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Projections&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isInCurrentMonth ae&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Created&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; Some ae
            &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; None&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; sortMapAndToArray

    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;income&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; expenses&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Which then later can be used in:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;jsx&quot;&gt;&lt;pre class=&quot;language-jsx&quot;&gt;&lt;code class=&quot;language-jsx&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Container &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;reactstrap&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; EntryList&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Header&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Loader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; EntryForm &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;../components&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; useEntries&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useIsLoading&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; useAddEntry &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;../bin/Main&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;HomePage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;income&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; expenses&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useEntries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; isLoading &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useIsLoading&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; addEntry &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useAddEntry&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Header&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Container&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;className&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;my-4&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Income&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EntryList&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;income&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Expenses&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EntryList&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;expenses&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Container&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;hr&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Container&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;Add entry&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;EntryForm&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;onSubmit&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token script-punctuation punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;addEntry&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Container&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token plain-text&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; isLoading &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;Loader&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; body&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; HomePage&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Formatting&lt;/h2&gt;
&lt;p&gt;Great, it looks like everything is place now. We can access the model, dispatch messages and manage the state in F#.
To wrap up, I want to extend the build script to format all the code.&lt;/p&gt;
&lt;p&gt;For the JavaScript I’m going to use &lt;a href=&quot;https://prettier.io/&quot;&gt;Prettier&lt;/a&gt; and for F# I can use &lt;a href=&quot;https://github.com/fsprojects/fantomas&quot;&gt;Fantomas&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Prettier&lt;/h3&gt;
&lt;p&gt;Prettier is very straightforward, add it with Yarn and create a script in the &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;yarn add prettier&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;capital-guardian&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0.1.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;private&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;dependencies&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;fable-compiler&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^2.4.11&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;fable-splitter&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^2.1.11&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;prettier&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^1.19.1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^16.12.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react-dom&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^16.12.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react-scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;3.2.0&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts start&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;build&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts build&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;test&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts test&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;eject&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts eject&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;fable&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fable-splitter fsharp/Main.fsx -o src/bin&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;prebuild&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;yarn fable&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;format&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;prettier ./src/**/*.js --write&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We don’t want Prettier to format the code generated by Fable.
To avoid this, add an &lt;code class=&quot;language-text&quot;&gt;.prettierignore&lt;/code&gt; file with &lt;code class=&quot;language-text&quot;&gt;src/bin&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Fantomas&lt;/h3&gt;
&lt;p&gt;Fantomas can easily be used in a FAKE target.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fake&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;IO&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Globbing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Operators
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fantomas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FakeHelpers
&lt;span class=&quot;token keyword&quot;&gt;open&lt;/span&gt; Fantomas&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FormatConfig

Target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;create &lt;span class=&quot;token string&quot;&gt;&quot;Format&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; fantomasConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; FormatConfig&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Default &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;
              ReorderOpenDeclaration &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;true&lt;/span&gt;
              KeepNewlineAfter &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; fsharpFiles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;clientPath &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fsharp&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;*.fsx&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
    fsharpFiles
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; formatCode fantomasConfig
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Async&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;RunSynchronously
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; printfn &lt;span class=&quot;token string&quot;&gt;&quot;Formatted F# files: %A&quot;&lt;/span&gt;

    Yarn&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exec &lt;span class=&quot;token string&quot;&gt;&quot;format&quot;&lt;/span&gt; setYarnWorkingDirectory&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Trigger it with &lt;code class=&quot;language-text&quot;&gt;dotnet fake run build.fsx -t Format&lt;/code&gt; and both languages will be handled.&lt;/p&gt;
&lt;h2&gt;The source&lt;/h2&gt;
&lt;p&gt;You can find the source on my &lt;a href=&quot;https://github.com/nojaf/capital-guardian/tree/blogpost&quot;&gt;GitHub&lt;/a&gt;.&lt;br /&gt;
Notice that the code for this blog post is preserved in the &lt;code class=&quot;language-text&quot;&gt;blogpost&lt;/code&gt; branch.&lt;/p&gt;
&lt;p&gt;The master branch will be used to finish the application.&lt;br /&gt;
At the time of writing I still have these intentions 😄.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;blogpost&lt;/code&gt; branch also contains some additional setup for the back-end.
And it is fleshed out to have a first usable functionality.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2252e5e58a7f80c338fd07acecd7f9a0/c112d/create-react-app-with-fable-result.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 72.60869565217392%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaUlEQVQ4y61Ty26DMBD0/39Zjz301lQihRAIEAPmZfyYercBJY2iEikrjVjW9jLMrIXREsYYnM9nFGWJPD9xnqYpyvBOeV3XyLIMTdNy7RhyGWpxknB9mjR0/w07dxDOKDjnoFQXFnMkyYGbnE7FJZfcMNrvUVUViqLgD3ddhziOQy5hHQA/w3sLgaugxtZazPPMT4Ix9io3/E5PrTWfqcsd2vIdqvoIDBWEUoo3UHjv8Wy0MkYnPzE0X7Cmh0iP2fq1LQ2XHQvjvyHaVvEiNd0KNlFK1pTk0XpikGSCBB+G4SmM4wiSioyhfKkTMRFF+zAKFV4VbMri7laQ1m04R7PonL+piyrMHNHt+34zaL+UdZjP5uYs/zIJS8VnTCEjWL9pupjyW19NIdDteMyqu2PYNA03vWNI141YviJWDUng5ZoRbQLNmg2I4gOi3RucztdDj8AuX3cnx5bFxfl+GNGpCt5O/zYk/ADJr5Kfoi2p0AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Create React App with Fable Result&quot;
        title=&quot;Create React App with Fable Result&quot;
        src=&quot;/static/2252e5e58a7f80c338fd07acecd7f9a0/799d3/create-react-app-with-fable-result.png&quot;
        srcset=&quot;/static/2252e5e58a7f80c338fd07acecd7f9a0/00d96/create-react-app-with-fable-result.png 148w,
/static/2252e5e58a7f80c338fd07acecd7f9a0/0b23c/create-react-app-with-fable-result.png 295w,
/static/2252e5e58a7f80c338fd07acecd7f9a0/799d3/create-react-app-with-fable-result.png 590w,
/static/2252e5e58a7f80c338fd07acecd7f9a0/2a3d6/create-react-app-with-fable-result.png 885w,
/static/2252e5e58a7f80c338fd07acecd7f9a0/c112d/create-react-app-with-fable-result.png 1150w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;I don’t believe the Mandalorian would say &lt;em&gt;“This is the way”&lt;/em&gt;, in terms of this approach.
There are pros and cons to it and it certainly is not a silver bullet.&lt;/p&gt;
&lt;h3&gt;Pros&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Much easier to use the vast existing JavaScript ecosystem. I’ve used &lt;a href=&quot;https://reactstrap.github.io/&quot;&gt;reactstrap&lt;/a&gt;, &lt;a href=&quot;https://react-hook-form.com/&quot;&gt;react-form-hook&lt;/a&gt;, &lt;a href=&quot;https://github.com/jquense/yup&quot;&gt;yup&lt;/a&gt;, &lt;a href=&quot;https://react-switch.netlify.com/&quot;&gt;react-switch&lt;/a&gt; without the need of writing a single binding file.&lt;/li&gt;
&lt;li&gt;No need for any webpack stuff! For me this is a big win, even when I wanted to use Sass the documentation of &lt;em&gt;Create React Application&lt;/em&gt; was dead simple and it a minute later everything was up and running.&lt;/li&gt;
&lt;li&gt;Tooling for React is vastly superior. I’m using Rider and all the good magic of WebStorm for React components is available for me.&lt;/li&gt;
&lt;li&gt;The formatting story is nicer, Fantomas is not that good with formatting Elmish views. I’m aware of this and it is just hard to get right. So, I’m happy that I can use Prettier for that.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Cons&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Part of the application is no longer statically typed. It provides speed but a what cost, right?&lt;/li&gt;
&lt;li&gt;The initial setup is rather time consuming. Doing the whole FAKE setup to have everything in place took some time. However, I really enjoyed it so I didn’t really mind.&lt;/li&gt;
&lt;li&gt;The output of the console is less clear. Since we are using two processes to compile all the code to JavaScript, it can get hard to spot what is going wrong from time to time. Create React Application has the habit of clearing the screen when it compiles.
Consequentially, you need to scroll to see the F# error you might have.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Overall, I like this, and time will tell if this ends up to be my new default or not.
Thanks for reading this far and I hope you enjoy the rest the of &lt;strong&gt;F# Advent calendar&lt;/strong&gt;!&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;
&lt;p&gt;Photo by &lt;a style=&quot;background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px&quot; href=&quot;https://unsplash.com/@aditya1702?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; title=&quot;Download free do whatever you want high-resolution photos from Aditya Vyas&quot;&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; style=&quot;height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white&quot; viewBox=&quot;0 0 32 32&quot;&gt;&lt;title&gt;unsplash-logo&lt;/title&gt;&lt;path d=&quot;M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;Aditya Vyas&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Building Fable on Travis CI]]></title><description><![CDATA[Introduction Hi nojaf from the future, its you from the past. Today you created a build script for compiling Fable projects on Travis CI…]]></description><link>https://blog.nojaf.com/building-fable-on-travis-ci/</link><guid isPermaLink="false">https://blog.nojaf.com/building-fable-on-travis-ci/</guid><pubDate>Sun, 01 Sep 2019 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Hi nojaf from the future, its you from the past. Today you created a build script for compiling Fable projects on Travis CI.
Using a &lt;a href=&quot;https://hub.docker.com/r/nojaf/fable/&quot;&gt;Docker image you maintain&lt;/a&gt; it is pretty easy to set up a Travis CI process.
This blogpost is meant to capture what you knew then in case you sorta forgot.&lt;/p&gt;
&lt;h2&gt;The good part&lt;/h2&gt;
&lt;p&gt;Once you logged in to &lt;a href=&quot;https://travis-ci.org/&quot;&gt;Travis&lt;/a&gt;, create a project by selecting a repository. Don’t worry you log in with your GitHub account and hit the add button.
They know you are you and you get to choose a repository you have on GitHub.&lt;/p&gt;
&lt;p&gt;If you did that then create a &lt;code class=&quot;language-text&quot;&gt;.travis.yml&lt;/code&gt; similar to &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;yml&quot;&gt;&lt;pre class=&quot;language-yml&quot;&gt;&lt;code class=&quot;language-yml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;language&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; minimal

&lt;span class=&quot;token key atrule&quot;&gt;services&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker

&lt;span class=&quot;token key atrule&quot;&gt;sudo&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; required

&lt;span class=&quot;token key atrule&quot;&gt;before_install&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; docker pull nojaf/fable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2.3&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;include&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;stage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;CI&quot;&lt;/span&gt;
      &lt;span class=&quot;token key atrule&quot;&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; docker run &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;v &quot;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;PWD&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;/app&quot; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;w &quot;/app&quot; nojaf/fable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;2.3 bash &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;c &quot;yarn &lt;span class=&quot;token important&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; yarn postinstall &lt;span class=&quot;token important&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; yarn build&quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Watch out, yaml is indentation sensitive and one extra space you mess the whole file 🙃. Use &lt;a href=&quot;http://www.yamllint.com/&quot;&gt;http://www.yamllint.com/&lt;/a&gt; in case of doubt.&lt;/p&gt;
&lt;p&gt;In the file you just created, you basically download the Docker image, run some &lt;code class=&quot;language-text&quot;&gt;yarn&lt;/code&gt; or &lt;code class=&quot;language-text&quot;&gt;npm run&lt;/code&gt; command in it and compile F# to JavaScript.&lt;/p&gt;
&lt;p&gt;The package json contains something like&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;json&quot;&gt;&lt;pre class=&quot;language-json&quot;&gt;&lt;code class=&quot;language-json&quot;&gt;  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;webpack-dev-server&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;build&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;webpack -p&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;postinstall&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;paket restore &amp;amp;&amp;amp; paket generate-load-scripts -f netstandard2.0 -t fsx&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;predeploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;npm run build&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;deploy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;gh-pages -d docs&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So the whole webpack thing is being triggered there.&lt;/p&gt;
&lt;h2&gt;The source&lt;/h2&gt;
&lt;p&gt;We both know the next time you’ll need this you are going to copy this anyway from some previous project.
Check out &lt;a href=&quot;https://github.com/nojaf/fable-reactstrap&quot;&gt;https://github.com/nojaf/fable-reactstrap&lt;/a&gt; to do so.&lt;/p&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;Plato once said no two trees are exactly alike, yet when we use the word tree people know what you mean.
So yeah, think about that next time you can’t sleep.
Take care man.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;
&lt;p&gt;Photo by &lt;a style=&quot;background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px&quot; href=&quot;https://unsplash.com/@augustindem?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; title=&quot;Download free do whatever you want high-resolution photos from Augustin de Montesquiou&quot;&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; style=&quot;height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white&quot; viewBox=&quot;0 0 32 32&quot;&gt;&lt;title&gt;unsplash-logo&lt;/title&gt;&lt;path d=&quot;M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;Augustin de Montesquiou&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Writing a VSCode extension with Fable 2.1]]></title><description><![CDATA[Introduction This post is part of the F# Advent Calendar in English 2018. I’m very grateful to be a part of this and I hope you will enjoy…]]></description><link>https://blog.nojaf.com/vscode-extension-with-fable/</link><guid isPermaLink="false">https://blog.nojaf.com/vscode-extension-with-fable/</guid><pubDate>Mon, 17 Dec 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;This post is part of the &lt;strong&gt;&lt;a href=&quot;https://sergeytihon.com/2018/10/22/f-advent-calendar-in-english-2018/&quot;&gt;F# Advent Calendar in English 2018&lt;/a&gt;&lt;/strong&gt;. I’m very grateful to be a part of this and I hope you will enjoy this one as much as I have enjoyed the others.&lt;/p&gt;
&lt;p&gt;Today I would like to show you how you can create &lt;a href=&quot;https://code.visualstudio.com/docs/extensions/overview&quot;&gt;VS Code extension&lt;/a&gt; from scratch using &lt;strong&gt;Fable&lt;/strong&gt;. Along the way we write some code that will extend the &lt;a href=&quot;https://www.markdownguide.org/getting-started&quot;&gt;Markdown&lt;/a&gt; syntax.&lt;/p&gt;
&lt;h2&gt;Project setup&lt;/h2&gt;
&lt;h3&gt;Code extension&lt;/h3&gt;
&lt;p&gt;To get started we will follow the general approach of scaffolding a new extension. Using the &lt;a href=&quot;https://code.visualstudio.com/docs/extensions/yocode&quot;&gt;yeoman&lt;/a&gt; generator we will scaffold a new &lt;em&gt;JavaScript&lt;/em&gt; extension.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/473f82c71001c8c1871c1da20220b763/683fc/yo-code.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.30316248636859%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB7UlEQVQ4y41T7W7aQBD0w7TF8flsg+svjFUMTlCR+LKxCYGmRALe/w0muyucIEqk/hjd+c43N7OzZ/R6PpJ+gjgOEAQBPM8TdLtd2LYt0Fp/zK/B67cwTNNEVyn4vo9hnmM6nWIymSCnueu6ULT3FZnjOPLPNQzXdZAmIaIoENIsy0hxH6zcJaWaDjlf4JZMCBXd5jkK2lYwLQsdUtzpmFCWgqttghYIwR1CmfP+Bcbj5BFlWWG1KlGt1zIulkv8Itua1H5LEvyIIpik3qLDii61qAzqAou+bYLmMthEWNYlTsczzuczjqcTDocDjscjmt0OaVEgHI0QD4eI0hQpIaELGH0qS0rg8SeFqVgpE46fRti9vmC//4PD2xv2r3/x9HuK+WyG5XyOgkhTJoljOdwSMviCAcEnQpvts2XL/Y4497CuajSbDZarFeZEVFWVgBO3b9tGfc7ZNltt62vo3gMGRYB63QjhqiyxpBo2dY2crLp30pWW0c7doD4J6wab52dRWBPZhsizwUBseG2a/wFD+w/IJiERbLF92YpNJmQU47GQRpQyt4h3p+/+6UObFCYjn2yWKIlsNl9QDRdim5uc2+L6aX1Yvoy3ewZHHnGC3BJ9ejGhK6+GVbWpSpqklMd2PQxD+Zb2uezz2ju8o63FtXqlxQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;vs code&quot;
        title=&quot;vs code&quot;
        src=&quot;/static/473f82c71001c8c1871c1da20220b763/799d3/yo-code.png&quot;
        srcset=&quot;/static/473f82c71001c8c1871c1da20220b763/00d96/yo-code.png 148w,
/static/473f82c71001c8c1871c1da20220b763/0b23c/yo-code.png 295w,
/static/473f82c71001c8c1871c1da20220b763/799d3/yo-code.png 590w,
/static/473f82c71001c8c1871c1da20220b763/2a3d6/yo-code.png 885w,
/static/473f82c71001c8c1871c1da20220b763/683fc/yo-code.png 917w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;Adding Fable&lt;/h3&gt;
&lt;p&gt;In order to add Fable we need two main pieces: a couple of npm modules and some NuGet packages.&lt;br&gt;
First, we will add them with yarn.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PS&gt; cd fable-markdown-extension&lt;/p&gt;
&lt;p&gt;PS&gt; yarn add -D “fable-compiler” “fable-splitter”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We won’t be using webpack as we don’t really need a bundle in this scenario. When a plugin is installed all JavaScript is executed in a node environment. All files are on disk so there is no need to bundle in order to spare some network requests.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;fable-compiler? The piece of Fable that compiles your F# source code. Don’t be confused by the fact that this is a npm package. It contains a &lt;code class=&quot;language-text&quot;&gt;.NET&lt;/code&gt; executable and a compiled version of &lt;code class=&quot;language-text&quot;&gt;Fable.Core&lt;/code&gt;. Although it is not really that important to know all this.&lt;/li&gt;
&lt;li&gt;fable-splitter? This npm package can compile multiple F# files linked by a &lt;code class=&quot;language-text&quot;&gt;.fsproj&lt;/code&gt; when configured correctly. We will use the splitter to compile F# files to JavaScript and nothing more. Under the hood &lt;code class=&quot;language-text&quot;&gt;fable-splitter&lt;/code&gt; uses &lt;code class=&quot;language-text&quot;&gt;fable-compiler&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Next we need a F# project. This can be a simple &lt;code class=&quot;language-text&quot;&gt;netstandard classlib&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PS&gt; dotnet new classlib -lang F# -o src -n AdventExtension&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This created a &lt;code class=&quot;language-text&quot;&gt;src&lt;/code&gt; folder with a &lt;code class=&quot;language-text&quot;&gt;Library.fs&lt;/code&gt; file in it. Let us try and compile this to JavaScript using &lt;code class=&quot;language-text&quot;&gt;fable-splitter&lt;/code&gt;.&lt;br&gt;
In our &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; we can add a new script called &lt;code class=&quot;language-text&quot;&gt;build&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;  &amp;quot;scripts&amp;quot;: {
    &amp;quot;postinstall&amp;quot;: &amp;quot;node ./node_modules/vscode/bin/install&amp;quot;,
    &amp;quot;build&amp;quot;: &amp;quot;fable-splitter --config splitter.config.js&amp;quot;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And as you would expect we will also need a &lt;code class=&quot;language-text&quot;&gt;splitter.config.js&lt;/code&gt; file.&lt;br&gt;
The configuration looks like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const path = require(&amp;quot;path&amp;quot;);

function resolve(relativePath) {  
  return path.join(__dirname, relativePath);
}

module.exports = {  
  entry: resolve(&amp;quot;src/AdventExtension.fsproj&amp;quot;),
  outDir: resolve(&amp;quot;out&amp;quot;),
  allFiles: true
};&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Execute by running &lt;code class=&quot;language-text&quot;&gt;yarn build&lt;/code&gt;. This is the equivalent of running &lt;code class=&quot;language-text&quot;&gt;npm run build&lt;/code&gt;. Yarn just doesn’t need the &lt;code class=&quot;language-text&quot;&gt;run&lt;/code&gt; word.&lt;br&gt;
We see that all the files in the project are compiled to the &lt;code class=&quot;language-text&quot;&gt;out&lt;/code&gt; folder as specified in &lt;code class=&quot;language-text&quot;&gt;splitter.config.js&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Now let us rename &lt;code class=&quot;language-text&quot;&gt;Library.fs&lt;/code&gt; and change it to &lt;code class=&quot;language-text&quot;&gt;Extension.fs&lt;/code&gt;, compile again and try to run our extension.&lt;/p&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;main&lt;/code&gt; property of our &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt; is pointing to &lt;code class=&quot;language-text&quot;&gt;./extension&lt;/code&gt;, so we will need to change that into &lt;code class=&quot;language-text&quot;&gt;out/Extension.js&lt;/code&gt;.&lt;br&gt;
However if we look at the existing &lt;code class=&quot;language-text&quot;&gt;extension.js&lt;/code&gt; file it seems to expose an &lt;code class=&quot;language-text&quot;&gt;activate&lt;/code&gt; function.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// The module &amp;#39;vscode&amp;#39; contains the VS Code extensibility API
// Import the module and reference it with the alias vscode in your code below
const vscode = require(&amp;#39;vscode&amp;#39;);

// this method is called when your extension is activated
// your extension is activated the very first time the command is executed
function activate(context) {

    // Use the console to output diagnostic information (console.log) and errors (console.error)
    // This line of code will only be executed once when your extension is activated
    console.log(&amp;#39;Congratulations, your extension &amp;quot;fable-markdown-extension&amp;quot; is now active!&amp;#39;);

    // The command has been defined in the package.json file
    // Now provide the implementation of the command with  registerCommand
    // The commandId parameter must match the command field in package.json
    let disposable = vscode.commands.registerCommand(&amp;#39;extension.sayHello&amp;#39;, function () {
        // The code you place here will be executed every time your command is executed

        // Display a message box to the user
        vscode.window.showInformationMessage(&amp;#39;Hello World!&amp;#39;);
    });

    context.subscriptions.push(disposable);
}
exports.activate = activate;

// this method is called when your extension is deactivated
function deactivate() {  
}
exports.deactivate = deactivate;  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So we will need this in our Fable code as well.&lt;br&gt;
Changing &lt;code class=&quot;language-text&quot;&gt;Extension.fs&lt;/code&gt; to&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;module AdventExtension.Extension

let activate _ =  
    printfn &amp;quot;Fable extension is activated!&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;should do the trick.&lt;/p&gt;
&lt;p&gt;At this point we have had to compile for a couple times already. It would be easier if we could compile continuously.&lt;br&gt;
This can be achieved by means of another &lt;code class=&quot;language-text&quot;&gt;fable-splitter&lt;/code&gt;, so let’s add a new build script &lt;code class=&quot;language-text&quot;&gt;watch&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    &amp;quot;scripts&amp;quot;: {
        &amp;quot;postinstall&amp;quot;: &amp;quot;node ./node_modules/vscode/bin/install&amp;quot;,
        &amp;quot;build&amp;quot;: &amp;quot;fable-splitter --config splitter.config.js&amp;quot;,
        &amp;quot;watch&amp;quot;: &amp;quot;yarn run build --watch&amp;quot;
    },&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;yarn watch&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Our compiled code looks like&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;import { toConsole, printf } from &amp;quot;./fable-library.2.1.8/String&amp;quot;;  
export function activate(_arg1) {  
  toConsole(printf(&amp;quot;Fable extension is activated!&amp;quot;));
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and we can launch the extension in code by hitting the play button in the Debug panel.&lt;br&gt;
However in our current setup we want our extension to run when VS Code starts.&lt;/p&gt;
&lt;p&gt;Change the &lt;code class=&quot;language-text&quot;&gt;activationEvents&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;*&lt;/code&gt; in the &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;  &amp;quot;activationEvents&amp;quot;: [
    &amp;quot;*&amp;quot;
  ]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and start debugging.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 460px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a96927a8495bf0fe0fe99a17d9e683a6/d5727/debug.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 102.17391304347827%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABuElEQVQ4y62U3Y7BUBDH+xrYi0W11Q+tVbbFUiHxFRKWFUQiceOplgdwaZ/vv2fGyvoIydpe/DPp6cxv5pwzZyT3tQivWIZpmnCcLCwrA103xLclrA7DMGFYJmzHRqlUYtm2I/wslm3b8P0iMhlb+BqQGvU6up0O0iK4UqnA83wGqaoGTUsjmZBRrJQxGL8jm31BPl/A83McyaTMyRzHQbn8xsWk0zok13XZyfd9tFot9Pt91Go15HI5sZ4XkCyCoIb9/gvb7Rabzw12ux1msxnvynXzDCV/slK1WkWz2YSiqJz1KFlOnWk4HGKxWGDyMRGwORcRjyeQSiks8qE4yfM8UJWapvHi0eFUsqwgFntCJBJFNBpje4SdxsiyANbFGbbbbbGQ4sBr2CGAdqCqKlvS6b9fK4C090KhwM63KjwGXeoyKQOn0ynW6/XPuSk3gfd0Buz1epjP51dZHwYGQYBGo8HnEgqw2+1iNBpd3djDQGpoek70MkIB0hmOx+OHYVdAampqm3uN/Scgvd/BYBDepdAAODR2SBUul0usVquzh/4vIE0bUmhbphlGomEaCpCGAymsW/4GEphanOxa5RsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;debug&quot;
        title=&quot;debug&quot;
        src=&quot;/static/a96927a8495bf0fe0fe99a17d9e683a6/d5727/debug.png&quot;
        srcset=&quot;/static/a96927a8495bf0fe0fe99a17d9e683a6/00d96/debug.png 148w,
/static/a96927a8495bf0fe0fe99a17d9e683a6/0b23c/debug.png 295w,
/static/a96927a8495bf0fe0fe99a17d9e683a6/d5727/debug.png 460w&quot;
        sizes=&quot;(max-width: 460px) 100vw, 460px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This opens a new instance of &lt;code class=&quot;language-text&quot;&gt;vscode&lt;/code&gt; and should contain our extension.&lt;/p&gt;
&lt;p&gt;Yikes, this isn’t really doing anything at all!&lt;br&gt;
We even see a crash when we toggle the developer tools.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f8c37c50c7bdca4652a227666fe38dec/bd44f/debug-failure-line-one-1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 54.20560747663551%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACnUlEQVQozz2S204TURSG5wUsFbjQHubQaWfaKaVAO22lhBATX0kTSaAC1RsTr3wCX0CvTDTGEKMXakQTAbHSAj0OPTGddhhoye+aqTLJyr/2JPvb/7/2ZtLZZWTuLCKTTiOZVJFIJEmTSKVSUFXV0UQiAUVRkM8/xreDJl5/KuH912Ontncq+LjbwofvDWz/qINJJBYQCErw+1l4vR74fD5SLwIBkSrg9Czrh9vtxvp6DgPrCvWmDq1toNHSUTvVUS3uo1PaQbNSBJNKqRDkWfDyHFhOoM0swf0IBoOQZRlelqBcEDfck3iUy8H+rkbDazX7ffz+8gJv3j1Bbf8lmGw2C57nCMTBz3LXQNtdOBxGSJIgCAG4b46Bl4MBtIaGbvcM3bMuKTn8+Qr7n5+jVXgLJpNOIajMQ4qpTnRB4J3YNlAURae3D3G5XMhvbeHSsqBpGnRdh2EYpD2YZx3A6sMgZZbIISfNQYyqEOUouIBEoDGM53kHZveT09PYWFuD1enAtM4xGo1gEbxPkXvlCs4HJrTTJph4PO5s9Pu8TlT2X+xQKOTM0YbZ6wn3BHIEvLKGMCimYTvs9dButdClQzrttqNMLDbjOOOlGDhRpoux4ePINlQQhLHDqSlsPFzFRb2FZqGEzskJtFIJ1UIBerUKo17HgEbBxGYIFklCiK+AFULOzDwej+PaBv6/JBc9m837D4BKDb29XzAPDnCxtwerWIRB8N7REQa1mh2ZnkxIpqejkDsWclBENKpglv7PLcwjQn1EieCW9zY2V1cxLGlo7/6BfngIk2AWuRxWaIYEtGyHd9V7UKU00uEMkiFSKYOl2AoWZ5ahyotOZSJLiPrjeJp/hlZbx/FxGSflMioUtUGQeqOB02YTpmniL0AvEAfAcxzDAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;crash in logs&quot;
        title=&quot;crash in logs&quot;
        src=&quot;/static/f8c37c50c7bdca4652a227666fe38dec/799d3/debug-failure-line-one-1.png&quot;
        srcset=&quot;/static/f8c37c50c7bdca4652a227666fe38dec/00d96/debug-failure-line-one-1.png 148w,
/static/f8c37c50c7bdca4652a227666fe38dec/0b23c/debug-failure-line-one-1.png 295w,
/static/f8c37c50c7bdca4652a227666fe38dec/799d3/debug-failure-line-one-1.png 590w,
/static/f8c37c50c7bdca4652a227666fe38dec/2a3d6/debug-failure-line-one-1.png 885w,
/static/f8c37c50c7bdca4652a227666fe38dec/ae92f/debug-failure-line-one-1.png 1180w,
/static/f8c37c50c7bdca4652a227666fe38dec/bd44f/debug-failure-line-one-1.png 1284w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;What code is telling us here is that it doesn’t know how to deal with the &lt;code class=&quot;language-text&quot;&gt;import&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;export&lt;/code&gt; keywords.&lt;br&gt;
I believe this whole thing is running in a node context, so we should be using &lt;code class=&quot;language-text&quot;&gt;module.exports&lt;/code&gt; instead.&lt;/p&gt;
&lt;p&gt;One small Babel plugin can do this for us. We need to download it with &lt;code class=&quot;language-text&quot;&gt;yarn&lt;/code&gt; and tell &lt;code class=&quot;language-text&quot;&gt;fable-splitter&lt;/code&gt; to use it as well.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PS&gt; yarn add -D “@babel/plugin-transform-modules-commonjs” “@babel/core”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;splitter.config.js&lt;/code&gt; becomes&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;const path = require(&amp;quot;path&amp;quot;);

function resolve(relativePath) {  
  return path.join(__dirname, relativePath);
}

module.exports = {  
  entry: resolve(&amp;quot;src/AdventExtension.fsproj&amp;quot;),
  outDir: resolve(&amp;quot;out&amp;quot;),
  babel: {
    plugins: [&amp;quot;@babel/plugin-transform-modules-commonjs&amp;quot;]
  },
  allFiles: true
};&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The JavaScript output now looks like&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;quot;use strict&amp;quot;;

Object.defineProperty(exports, &amp;quot;__esModule&amp;quot;, {  
  value: true
});
exports.activate = activate;

var _String = require(&amp;quot;./fable-library.2.1.8/String&amp;quot;);

function activate(_arg1) {  
  (0, _String.toConsole)((0, _String.printf)(&amp;quot;Fable extension is activated!&amp;quot;));
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and our extension now runs!&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3d556a0ded333155570b83687dc1ffff/3eaa1/extension-loaded.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 71.16060961313013%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC7UlEQVQ4y2WTW07bQBSGvYEGEl7aJL7FdhJTQrm0PFZq2r60UrfQhxYIsIaqu2ABSBW0L1RiGUAlhEgJF5MbsWM7iRMCIUHJ3zOGQCUsfTozHvufc878w0mSBIYoij6KoiAUCmEpk0HfrqJkGLjudjEYDHB1deXTue6gUauhRWtdz0Oz1US73cbm5ia4SCSCIdFoFKIg+IILC4vo1D04VZsEuuh0rv3Y7fZogx48r4mGaeGi3oDXbOHmpo+NjQ1wmqYhmUxCVVVfVCDBkZFREvyKy7YDr17C5YWNeq0C8/wMrl1Gq2mjUTdh09hrWD5AD79+roOLx+NgosOyY7KM0dEgVpbn0WrUYBznUMznYFUM2NYZ6m4ZdadIsXSPXc2T4CW2tn6D03Xdz04mISaqxGIIBkPILH5Gy6ugVC6iSpmY1gn1isTqBTiugUajiJpjkLhBbTkGBh5l+AMcK5FlxsoNh8N+HwOBADLLK+hTsy/+HqBnnGJQLhFU7ukpnNwh3GwWzvk5XNdFtcpKBtbW1sBNpiaRSqUow5gvzLIdC40hk1lCz6Ue7u/j+uQE/UoFfdNEu1SCQ3P36Ag2zR0maFUfBJ9Fn4IREcI+gszjSTCAxfkvuCzYqBxSn85MeBZBP7vFIkzbhuk41AYLFlGhzdizvk6HkpY+gPFGvCUtfcT75Cd8W/yO3M4uDnb/IEsc7Gwju72N4709FPL5WwoF5Cka5Mca+XJ1dRXcuJrCkOcsKhOIiwkokuafeIwOShYlinfjmIIYIdPh/Q97J9E3nKKpGKISskKLaoy8qVA/Zeh6HFNTKZrHoROaQvYSolBkgTbkaZNbJJH333GaSh8N0eJkGxUvEyrezep4O6Pj9YsE0jPjSE/rmJuQMT0hYSIhYpbizB1T4xImdQnjcZHdlFshTdX8qNJdniajv0rqPjNk/NlEEnN0mxSB7MXz4HmB4B8RJe4F1aEgRbbAkx+ZJ3k++jAWeP9qCvfxMf8ALTyayZHgR88AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;extension runs&quot;
        title=&quot;extension runs&quot;
        src=&quot;/static/3d556a0ded333155570b83687dc1ffff/799d3/extension-loaded.png&quot;
        srcset=&quot;/static/3d556a0ded333155570b83687dc1ffff/00d96/extension-loaded.png 148w,
/static/3d556a0ded333155570b83687dc1ffff/0b23c/extension-loaded.png 295w,
/static/3d556a0ded333155570b83687dc1ffff/799d3/extension-loaded.png 590w,
/static/3d556a0ded333155570b83687dc1ffff/3eaa1/extension-loaded.png 853w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;F# dependencies&lt;/h3&gt;
&lt;p&gt;Ok, after some trial and error we have the basics in place. However, a little intelliSense would not hurt.&lt;br&gt;
There is a NuGet package for that: &lt;a href=&quot;https://www.nuget.org/packages/Fable.Import.VSCode/&quot;&gt;Fable.Import.VSCode&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We could install it into our &lt;code class=&quot;language-text&quot;&gt;fsproj&lt;/code&gt; with &lt;code class=&quot;language-text&quot;&gt;dotnet add&lt;/code&gt;, but I would prefer to download it with &lt;code class=&quot;language-text&quot;&gt;paket&lt;/code&gt; instead.&lt;br&gt;
Paket can easily be added to a project using:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PS&gt; dotnet tool install —tool-path “.paket” Paket —add-source &lt;a href=&quot;https://api.nuget.org/v3/index.json&quot;&gt;https://api.nuget.org/v3/index.json&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This downloads the &lt;code class=&quot;language-text&quot;&gt;.NETCore&lt;/code&gt; version of Paket into a &lt;code class=&quot;language-text&quot;&gt;.paket&lt;/code&gt; folder. This should be familiar to most of us.&lt;br&gt;
Next we enter &lt;code class=&quot;language-text&quot;&gt;.paket\paket.exe init&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Open the &lt;code class=&quot;language-text&quot;&gt;paket.dependencies&lt;/code&gt; file and add&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;source https://www.nuget.org/api/v2  
storage:none  
framework: netstandard2.0

# nuget Fable.Import.Jest // Use when ready for Fable2
github nojaf/fable-jest:fable2 fable/Bindings.fs  
github nojaf/fable-jest:fable2 fable/Exports.fs  
github nojaf/fable-jest:fable2 fable/Matchers.fs  
nuget FSharp.Core redirects:force  
nuget Fable.Import.VSCode  
nuget Fable.Parsimmon  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It will download &lt;code class=&quot;language-text&quot;&gt;VS Code&lt;/code&gt; bindings, &lt;code class=&quot;language-text&quot;&gt;Jest&lt;/code&gt; bindings and &lt;code class=&quot;language-text&quot;&gt;Fable.Parsimmon&lt;/code&gt;. I’ll explain later why we need those.&lt;br&gt;
Then, create a &lt;code class=&quot;language-text&quot;&gt;paket.references&lt;/code&gt; file next to the fsproj.&lt;/p&gt;
&lt;p&gt;Add&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;Fable.Import.VSCode  
Fable.Parsimmon  
File:Bindings.fs Jest  
File:Exports.fs Jest  
File:Matchers.fs Jest  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Run &lt;code class=&quot;language-text&quot;&gt;.paket\paket.exe install&lt;/code&gt;, which should add everything on &lt;strong&gt;.NET&lt;/strong&gt; side.&lt;/p&gt;
&lt;h3&gt;Those last npm packages&lt;/h3&gt;
&lt;p&gt;To wrap up the setup of the project, we still need a few npm packages.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;yarn add -D “jest” “markdown-it”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That should be it. Thanks for sticking around if you are still here 😊.&lt;br&gt;
Now we can finally start coding.&lt;/p&gt;
&lt;h2&gt;Revelations&lt;/h2&gt;
&lt;p&gt;I feel like we have been through a lot already, and I haven’t really revealed the master plan of all this.&lt;br&gt;
I mentioned that we would extend Markdown. In this blogpost we will add two new features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fable logo&lt;/li&gt;
&lt;li&gt;Fable font&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Fable logo&lt;/h3&gt;
&lt;p&gt;Whenever we type &lt;code class=&quot;language-text&quot;&gt;:fable:&lt;/code&gt; in our Markdown file, we would like to &lt;a href=&quot;https://fable.io/img/fable_logo.png&quot;&gt;the Fable logo&lt;/a&gt; to show in our preview.&lt;/p&gt;
&lt;h3&gt;Fable text&lt;/h3&gt;
&lt;p&gt;If we add text between two &lt;code class=&quot;language-text&quot;&gt;🐉&lt;/code&gt; emoji, it should rendered in a different font.&lt;/p&gt;
&lt;p&gt;Both features should also be &lt;strong&gt;highlighted&lt;/strong&gt; in the editor itself.&lt;/p&gt;
&lt;h2&gt;Test-driven development&lt;/h2&gt;
&lt;p&gt;Now that we know what we want, we can start thinking about solving the problem.&lt;br&gt;
Without considering VS Code we know that we will need a way to detect&lt;code class=&quot;language-text&quot;&gt;:fable:&lt;/code&gt; and text between &lt;code class=&quot;language-text&quot;&gt;🐉&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;What better way of parsing text than using &lt;a href=&quot;https://github.com/Zaid-Ajaj/Fable.Parsimmon&quot;&gt;Fable.Parsimmon&lt;/a&gt;?&lt;br&gt;
If you have any experience with &lt;a href=&quot;http://www.quanttec.com/fparsec/&quot;&gt;FParsec&lt;/a&gt;, the API is very similar.&lt;/p&gt;
&lt;p&gt;In order to have a &lt;strong&gt;short feedback loop&lt;/strong&gt;, we can easily do some &lt;strong&gt;TDD&lt;/strong&gt; instead of trying things out in the extension itself.&lt;/p&gt;
&lt;p&gt;We already installed &lt;a href=&quot;https://jestjs.io/&quot;&gt;Jest&lt;/a&gt; and the accompanying F# bindings. Note that these bindings were installed with paket through &lt;code class=&quot;language-text&quot;&gt;github&lt;/code&gt; instead of &lt;code class=&quot;language-text&quot;&gt;nuget&lt;/code&gt;. This has to do with the fact that &lt;a href=&quot;https://github.com/jgrund/fable-jest/issues/13&quot;&gt;Fable.Jest doesn’t work 100% with Fable 2.X&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;My fork of &lt;a href=&quot;https://github.com/jgrund/fable-jest/pull/14&quot;&gt;Fable.Jest&lt;/a&gt; contains a workaround for this.&lt;br&gt;
Here you can already see that using &lt;code class=&quot;language-text&quot;&gt;paket&lt;/code&gt; instead of &lt;code class=&quot;language-text&quot;&gt;NuGet&lt;/code&gt; was a smart move.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Unit testing in Fable&lt;/strong&gt; is described to some extent in the &lt;a href=&quot;https://fable.io/faq/#unit-tests&quot;&gt;FAQ&lt;/a&gt;. In our case everything is almost fully set up. We need to change the &lt;code class=&quot;language-text&quot;&gt;test&lt;/code&gt; script in our package.json.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;quot;scripts&amp;quot;: {
    &amp;quot;postinstall&amp;quot;: &amp;quot;node ./node_modules/vscode/bin/install&amp;quot;,
    &amp;quot;build&amp;quot;: &amp;quot;fable-splitter --config splitter.config.js&amp;quot;,
    &amp;quot;watch&amp;quot;: &amp;quot;yarn run build --watch&amp;quot;,
    &amp;quot;test&amp;quot;: &amp;quot;jest&amp;quot;
},&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add a file that matches the following convention &lt;code class=&quot;language-text&quot;&gt;*.test.fs&lt;/code&gt; to our project, and the &lt;code class=&quot;language-text&quot;&gt;*.test.js&lt;/code&gt; should be picked up by &lt;strong&gt;Jest&lt;/strong&gt;.&lt;br&gt;
&lt;code class=&quot;language-text&quot;&gt;Parser.test.fs&lt;/code&gt; with a &lt;em&gt;simple unit test&lt;/em&gt; should be enough for now.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;module AdventExtension.Tests.Parser

open Fable.Import.Jest  
open Fable.Import.Jest.Matchers

test &amp;quot;simple Jest test should be picked up&amp;quot; &amp;lt;| fun () -&amp;gt;  
    &amp;quot;42&amp;quot; == &amp;quot;the answer of the Universe&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Execute with&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PS&gt; yarn build&lt;/p&gt;
&lt;p&gt;PS&gt; yarn test&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2c528b939633877846a9884dc9ea30c3/41c64/failing-test.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 93.2367149758454%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB40lEQVQ4y41TSZKcMBDs/3/EFx/nIZ6rY3phQKxCe2mXmKI99g3aGRAhFKQqlZV1sR6GlYxT3zwazpj3wQCAMUop5/22bbXW7QAX1ba/f/6Qcy+lUnKHBUgpxRBzztspLn6amrc38rhPdJ3maRiHha7WOSElShCcO+cOyaiq5hwZywDR6KRU5CwpHZY1SJFTKqUckvFOwYJcWcRfOQMpBV2ZWWfoXYAXsvGNMXDJ7dMnAxoFx5ziFkstr8khhM+l+eTdqGcKyyB7GlZf/PYKOxm9lfPsnP23W/EyW31N/tNGFBxTTnXLpWCbUkandqtwr5R6Ri45SyEk2Pswt6S/Xa9d196uH4SQx6PB7p9WrtV7j7FIwccQYtzjgUZ4XIdYzysjMAyAB9QNdQbv8AjvLCrHkzAk5SBq32TsE9eGGrdqGFe2cIGBk0ZTShnjRzl53rkUSpemuS/L0jD9saoHN5/aE2H6cQILR6PxXVlrzTnHSWJCKPzwgYLnNnAXtPNH8b5YawfST9hnA5lSjxqeUrf/wAWz/P7rnXPhrCW3GwpAi/3fST4Z5p0MWs19zxjDkm3XgbXlCQz8OXMnBxcE5UNPSEeGfiBd1xEyTWPXtrsLUmL4rAWMitYKcG60xmk3WuPzBfRqULSVphPzAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;failing test&quot;
        title=&quot;failing test&quot;
        src=&quot;/static/2c528b939633877846a9884dc9ea30c3/799d3/failing-test.png&quot;
        srcset=&quot;/static/2c528b939633877846a9884dc9ea30c3/00d96/failing-test.png 148w,
/static/2c528b939633877846a9884dc9ea30c3/0b23c/failing-test.png 295w,
/static/2c528b939633877846a9884dc9ea30c3/799d3/failing-test.png 590w,
/static/2c528b939633877846a9884dc9ea30c3/41c64/failing-test.png 621w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=VzDN7mCDoC0&quot;&gt;Coolio&lt;/a&gt;, we can unit test now! The way I like to proceed now is having two console windows. One to run &lt;code class=&quot;language-text&quot;&gt;fable-splitter&lt;/code&gt; with &lt;code class=&quot;language-text&quot;&gt;yarn watch&lt;/code&gt;, and other to run tests with &lt;code class=&quot;language-text&quot;&gt;yarn test --watchAll&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Fable.Parsimmon&lt;/h2&gt;
&lt;p&gt;Since we are going to parse text, we need a type to capture the result of our parsing.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;type ParserResult =  
    | Text of string
    | FableFontText of NodeResult&amp;lt;string&amp;gt;
    | FableLogo of NodeResult&amp;lt;string&amp;gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We may now have found some text, text between dragons (🐉) or &lt;code class=&quot;language-text&quot;&gt;:fable:&lt;/code&gt;.&lt;br&gt;
When we have found one or both of the latter two, we would need to know where in our text we have found them.&lt;br&gt;
This is where &lt;code class=&quot;language-text&quot;&gt;Parsimmon.node&lt;/code&gt; comes in handy, as it returns a &lt;code class=&quot;language-text&quot;&gt;NodeResult&amp;lt;&amp;#39;t&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;type TokenPosition =  
    { offset: int
      line: int
      column: int }

type NodeResult&amp;lt;&amp;#39;t&amp;gt; =  
    { name: string
      value: &amp;#39;t
      start: TokenPosition
      ``end``: TokenPosition }&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Next we need a function that takes a string and returns &lt;code class=&quot;language-text&quot;&gt;Fable.Parsimmon.ParseResult&amp;lt;ParserResult array&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;let parseText input : ParseResult&amp;lt;ParserResult array&amp;gt; = failwith &amp;quot;Nothing here yet.&amp;quot;  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And we can quickly write some tests.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;test &amp;quot;basic fable font&amp;quot; &amp;lt;| fun () -&amp;gt;  
    let input = &amp;quot;🐉vibes🐉&amp;quot;
    let parsed = Parser.parseText input
    parsed.status == true

test &amp;quot;no fable font&amp;quot; &amp;lt;| fun () -&amp;gt;  
    let input = &amp;quot;fableless vibes&amp;quot;
    let parsed = Parser.parseText input
    parsed.status == true

test &amp;quot;fable logo is found&amp;quot; &amp;lt;| fun () -&amp;gt;  
    let input = &amp;quot;Once upon a :fable:...&amp;quot;
    let parsed = Parser.parseText input

    parsed.status == true

    match parsed.value with
    | [| Text _; FableLogo logo; Text _|] -&amp;gt;
        logo.start.offset == 12
        logo.value.Length == 7
    | _ -&amp;gt; failwith &amp;quot;Expected logo in center&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that &lt;code class=&quot;language-text&quot;&gt;==&lt;/code&gt; is a shorthand for &lt;code class=&quot;language-text&quot;&gt;Fable.Import.Jest.Exports.expect.Invoke(&amp;quot;foo&amp;quot;).toBe(&amp;quot;bar&amp;quot;)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To make these tests pass we’ll write some custom parsers, mostly based on regular expressions.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;module AdventExtension.Parser

open Fable.Parsimmon  
open Fable.Core  
open System.Text.RegularExpressions

type ParserResult =  
    | Text of string
    | FableFontText of NodeResult&amp;lt;string&amp;gt;
    | FableLogo of NodeResult&amp;lt;string&amp;gt;

// no /g flag
[&amp;lt;Emit(&amp;quot;new RegExp($0)&amp;quot;)&amp;gt;]
let createRegex pattern : Regex = jsNative

let dragonParser = Parsimmon.str &amp;quot;🐉&amp;quot;

let noDragonParser =  
    Parsimmon.regex (createRegex @&amp;quot;[^🐉]+&amp;quot;)

let fableFontParser =  
    Parsimmon.between dragonParser dragonParser noDragonParser
    |&amp;gt; Parsimmon.node &amp;quot;FableFont&amp;quot;
    |&amp;gt; Parsimmon.map (ParserResult.FableFontText)

let halfDragon =  
    &amp;quot;🐉&amp;quot;.ToCharArray()
    |&amp;gt; Array.head
    |&amp;gt; (string)

let noDragonsParser =  
    Parsimmon.satisfy (fun token -&amp;gt; token &amp;lt;&amp;gt; halfDragon &amp;amp;&amp;amp; token &amp;lt;&amp;gt; &amp;quot;:&amp;quot;)
        |&amp;gt; Parsimmon.atLeastOneOrMany
        |&amp;gt; Parsimmon.concat
        |&amp;gt; Parsimmon.map (ParserResult.Text)

let fableLogoParser =  
    Parsimmon.str &amp;quot;:fable:&amp;quot;
    |&amp;gt; Parsimmon.node &amp;quot;FableLogo&amp;quot;
    |&amp;gt; Parsimmon.map (FableLogo)

let parseText input : ParseResult&amp;lt;ParserResult array&amp;gt; =  
    Parsimmon.choose [ 
        fableLogoParser
        noDragonsParser
        fableFontParser
    ] 
    |&amp;gt; fun parser -&amp;gt; parser.many().parse(input)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I won’t go into detail about exactly how this works but I do want to highlight two things:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;quot;🐉&amp;quot;.Length&lt;/code&gt; returns &lt;code class=&quot;language-text&quot;&gt;2&lt;/code&gt;. And &lt;code class=&quot;language-text&quot;&gt;Parsimmon.satisfy&lt;/code&gt; only compares a single token at a time.&lt;/li&gt;
&lt;li&gt;Creating a &lt;code class=&quot;language-text&quot;&gt;Regex&lt;/code&gt; via the .NET API compiles to a JavaScript Regex that uses the &lt;code class=&quot;language-text&quot;&gt;/g&lt;/code&gt; flag. This is something we don’t want in this case, so I’ve added a little helper that emits a &lt;code class=&quot;language-text&quot;&gt;Regex&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Presumably this code is more or less readable, and we can continue 😅.&lt;/p&gt;
&lt;h2&gt;Highlighting code&lt;/h2&gt;
&lt;p&gt;Highlighting in VS Code is surprisingly easily. All we need to do is tell code which &lt;code class=&quot;language-text&quot;&gt;range&lt;/code&gt; should be decorated with which &lt;code class=&quot;language-text&quot;&gt;style&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Let’s first create some &lt;code class=&quot;language-text&quot;&gt;TextDecorationEditorStyle&lt;/code&gt; objects.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;module AdventExtension.Extension

open Fable.Core.JsInterop  
open Fable.Import.vscode

let createFontOptions color backgroundColor fontWeight : DecorationRenderOptions =  
    jsOptions (fun options -&amp;gt;
        options.color &amp;lt;- Some color
        options?fontWeight &amp;lt;- fontWeight
        options.backgroundColor &amp;lt;- backgroundColor
    )

let activate _ =  
    let fableFontStyle = window.createTextEditorDecorationType(createFontOptions &amp;quot;#87c5fd&amp;quot; (Some &amp;quot;white&amp;quot;) None)
    let fableLogoStyle = window.createTextEditorDecorationType(createFontOptions &amp;quot;#87c5fd&amp;quot; None (Some &amp;quot;bold&amp;quot;))

    printfn &amp;quot;Fable extension activated!&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we need to subscribe to certain events.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;let activate (context: ExtensionContext) =  
    let fableFontStyle = window.createTextEditorDecorationType(createFontOptions &amp;quot;#87c5fd&amp;quot; (Some &amp;quot;white&amp;quot;) None)
    let fableLogoStyle = window.createTextEditorDecorationType(createFontOptions &amp;quot;#87c5fd&amp;quot; None (Some &amp;quot;bold&amp;quot;))

    // Capture the active editor.
    let mutable activeEditor = window.activeTextEditor

    let updateDecorations() = failwithf &amp;quot;Nothing here yet.&amp;quot;

    let mutable timeoutKey = None;
    let triggerUpdateDecorations _ =
        timeoutKey
        |&amp;gt; Option.iter (JS.clearTimeout)

        timeoutKey &amp;lt;- Some (JS.setTimeout updateDecorations 500)

    // User is typing
    window.onDidChangeActiveTextEditor.Invoke((fun editor -&amp;gt;
        activeEditor &amp;lt;- Some editor
        triggerUpdateDecorations()
        null
    ))
    |&amp;gt; context.subscriptions.Add

    // Change of document
    workspace.onDidChangeTextDocument.Invoke((fun event -&amp;gt;
        match activeEditor with
        | Some aEditor when (event.document = aEditor.document) -&amp;gt;
            triggerUpdateDecorations()
        | _ -&amp;gt; ()
        null
    ))
    |&amp;gt; context.subscriptions.Add

    activeEditor
    |&amp;gt; Option.iter (triggerUpdateDecorations)

    printfn &amp;quot;Fable extension activated!&amp;quot;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that the event handlers call &lt;code class=&quot;language-text&quot;&gt;triggerUpdateDecorations&lt;/code&gt;, which prevents us from re-rendering too much.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// Parsimmon ranges are 1-based, VS Code works with 0-based indexing.
let nodeResultToRange&amp;lt;&amp;#39;t&amp;gt; (nr: NodeResult&amp;lt;&amp;#39;t&amp;gt;) =  
    let zeroBasedFloat r = r - 1 |&amp;gt; (float)
    vscode.Range(zeroBasedFloat nr.start.line,
                 zeroBasedFloat nr.start.column,
                 zeroBasedFloat nr.``end``.line,
                 zeroBasedFloat nr.``end``.column)

let updateDecorations() =  
    activeEditor
    |&amp;gt; Option.iter (fun aEditor -&amp;gt;
        if aEditor.document.languageId = &amp;quot;markdown&amp;quot; then
            let text = aEditor.document.getText()
            let parsed = Parser.parseText text

            if parsed.status then
                parsed.value
                |&amp;gt; Array.map (fun node -&amp;gt;
                    match node with
                    | ParserResult.FableLogo logo -&amp;gt;
                        Some (fableLogoStyle, nodeResultToRange logo)

                    | ParserResult.FableFontText fableText -&amp;gt;
                        Some (fableFontStyle, nodeResultToRange fableText)

                    | _ -&amp;gt;
                        None

                )
                |&amp;gt; Array.choose id
                |&amp;gt; Array.groupBy (fun (style,_) -&amp;gt; style.key)
                |&amp;gt; Array.iter (fun (styleKey, ranges) -&amp;gt;
                    let r =
                        Array.map snd ranges
                        |&amp;gt; ResizeArray

                    let style = if fableFontStyle.key = styleKey then fableFontStyle else fableLogoStyle

                    aEditor.setDecorations(style, !^ r)
                )
    )&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;updateDecorations&lt;/code&gt; is rather straightforward as well. We map the result of &lt;code class=&quot;language-text&quot;&gt;parseText&lt;/code&gt; and make ranges out of it. The result looks as follows:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 440px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9241f006892f0dab63b9108ff3f3dd96/bafff/markdown-highlighting-1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 59.31818181818181%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACSUlEQVQoz31S2XLaQBDU/39AXvIFSbmSOFCJQyDEQbINMrdAAoTQARb3Ja0Ors6wIna5KslD185qe3tnuiU09BbqPQXjgYyJVYHdl+FaVXQVEUOjjNHgEVavhCezwtFri7D1EiZOHX3tjnPGdg1mt4j1VIXQVe/RIZLWvMWDnIdS+Y5WNQulnMFALWA57WDutrCatOEturSq0NsS6o8ZNAhKJUv8HJrE11u3EJqlFMqFd6hV8rj+kYEsfUZRTKH68AV9IqxXJmauiqXbRuyZiLcmDFWCmP8A+S5N/DRKUorXSvkbhJ6Sh9bIwZu2sdsOEKwNeCTijg2OxcKBOz3Dxo45QDTCgdkEK4H/gj1B0OpZFH+9hzfvYOc7CKmD2LOwWZpgGwvbWQeLscofCjfG8xpuBgnWfb6PLhA6jSzUaoYENRK0+WHsj+BOTMynOoVVgqFJ8Ocq/MUF8xfEJOoveryhMwS1lkH1/poONerOorFGcAwJY1dHFIdgoY94FyCOfARUs8BDeP5GexYx9DoiddbnVhwDJxEsSx/BKMGIRo39IUZOEU9jjYtt/SUYWyGKViR4QUD7YEnrGroukg06TuGQe0sj5yidr88jB+Qhtg72I/KURHfDNvY0Ukx1THVktxBT6kdm4kQgEk5BIsY7lAtXuPn0BmyZdOivB0SmRDcm9mTBnoLhq3euTY4DPXygywdKfc/TTsR4h3rrJ85JezMymIiMTD7R4fEfONBofy7/7VyQxStk028pqW5iLP/H/gfnVUdH9lrwNw5wcG3UcUJ0AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Markdown highlighting in VS Code&quot;
        title=&quot;Markdown highlighting in VS Code&quot;
        src=&quot;/static/9241f006892f0dab63b9108ff3f3dd96/bafff/markdown-highlighting-1.png&quot;
        srcset=&quot;/static/9241f006892f0dab63b9108ff3f3dd96/00d96/markdown-highlighting-1.png 148w,
/static/9241f006892f0dab63b9108ff3f3dd96/0b23c/markdown-highlighting-1.png 295w,
/static/9241f006892f0dab63b9108ff3f3dd96/bafff/markdown-highlighting-1.png 440w&quot;
        sizes=&quot;(max-width: 440px) 100vw, 440px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Preview mode&lt;/h2&gt;
&lt;p&gt;When we switch to preview mode of the Markdown file, we don’t really see any changes.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 440px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6723609f69c56431830f4b400567a18d/bafff/preview-before-1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACJUlEQVQ4y31T2XLaQBDU/z/nOY8pVyWVcio2dioYHMyNEYhDJwgJBFgCxI257M7smPKRGD907exot6enZyWVzRr6dh5+uwTHyuGuXYZRu4HbyCPwFLiU8zsK+vS907yFWU/SmRJsIwNLTfH5hpZCz5Ex9lVIhpaGVU+gULxGvRSFWo6hLkdhVuPQq9eoylfQlRj0SpzXpppE6BsYdqsY9mqYBBqvY1/DbGhAKiROoNClb79/IfPnFCmCnD2HWrxEIRNB8uYnsolTFNNnUHLncI0UxoMGk4R3KsaEsK9iGhhYhhYkXYlSogosXTys2ozdwsF27nD8KHLLJ+zpzGbWolwHj/ceocPxA++fVimf+Ir5UCfpBmpyHFolgW5LhmfLaGoZmLUUeZpEy8gx7ic2k+1FkQPZa0jV2wjJVbGetth0zy5icPBHxD2nxBBFeoT11Gay3cJ9F8+EoqpIiCrigthj0wXWb3GM6JkwEz/hljczF31XYXWDbu3FI149LoR1D9j6R9vllo3KFREa5GGFWstiNbZpb2I2MLAYWTy9+chk7wJPtJ5mpXse0v+QIt8/YRU24XfzMNULzAKL39ioX8dy3OD3JVTPBiacRhL1yg9WenQoSv6MPVyGNg1FhmOKP4TUtkpoqGkehlDEnm77wC74uOVU7AtV13nKIakSiqaBjim1LB7shOKXltw3g3uXMHbxmQg0migZvvYO0/Rexd0PCf7FX6p0utsLBokXAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Preview mode before&quot;
        title=&quot;Preview mode before&quot;
        src=&quot;/static/6723609f69c56431830f4b400567a18d/bafff/preview-before-1.png&quot;
        srcset=&quot;/static/6723609f69c56431830f4b400567a18d/00d96/preview-before-1.png 148w,
/static/6723609f69c56431830f4b400567a18d/0b23c/preview-before-1.png 295w,
/static/6723609f69c56431830f4b400567a18d/bafff/preview-before-1.png 440w&quot;
        sizes=&quot;(max-width: 440px) 100vw, 440px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This can be changed by writing our own &lt;a href=&quot;https://markdown-it.github.io/&quot;&gt;markdown-it&lt;/a&gt; extension.&lt;br&gt;
To be fair, it took me a while to figure out how this works. Even after reading the &lt;a href=&quot;https://github.com/markdown-it/markdown-it/blob/master/docs/architecture.md&quot;&gt;documentation&lt;/a&gt;, I was still somewhat puzzled.&lt;/p&gt;
&lt;p&gt;What &lt;code class=&quot;language-text&quot;&gt;markdown-it&lt;/code&gt; does is it parses the Markdown content to a token stream.&lt;/p&gt;
&lt;p&gt;Ex.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;This is some **markdown text**  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Will be parsed to&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;[
  {
    &amp;quot;type&amp;quot;: &amp;quot;paragraph_open&amp;quot;,
    &amp;quot;tag&amp;quot;: &amp;quot;p&amp;quot;,
  },
  {
    &amp;quot;type&amp;quot;: &amp;quot;inline&amp;quot;,
    &amp;quot;tag&amp;quot;: &amp;quot;&amp;quot;,
    &amp;quot;map&amp;quot;: [
      0,
      1
    ],
    &amp;quot;nesting&amp;quot;: 0,
    &amp;quot;level&amp;quot;: 1,
    &amp;quot;children&amp;quot;: [
      {
        &amp;quot;type&amp;quot;: &amp;quot;text&amp;quot;,
        &amp;quot;tag&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;content&amp;quot;: &amp;quot;This is some &amp;quot;,
      },
      {
        &amp;quot;type&amp;quot;: &amp;quot;strong_open&amp;quot;,
        &amp;quot;tag&amp;quot;: &amp;quot;strong&amp;quot;,
      },
      {
        &amp;quot;type&amp;quot;: &amp;quot;text&amp;quot;,
        &amp;quot;tag&amp;quot;: &amp;quot;&amp;quot;,
        &amp;quot;content&amp;quot;: &amp;quot;markdown text&amp;quot;,
      },
      {
        &amp;quot;type&amp;quot;: &amp;quot;strong_close&amp;quot;,
        &amp;quot;tag&amp;quot;: &amp;quot;strong&amp;quot;,
      },
      {
        &amp;quot;type&amp;quot;: &amp;quot;text&amp;quot;,
        &amp;quot;tag&amp;quot;: &amp;quot;&amp;quot;,
      }
    ],
    &amp;quot;content&amp;quot;: &amp;quot;This is some **markdown text**&amp;quot;,
  },
  {
    &amp;quot;type&amp;quot;: &amp;quot;paragraph_close&amp;quot;,
    &amp;quot;tag&amp;quot;: &amp;quot;p&amp;quot;,
  }
]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that this is a simplified version. We need to break down any tokens of &lt;code class=&quot;language-text&quot;&gt;type:&amp;quot;text&amp;quot;&lt;/code&gt; and replace them with our own token type (&lt;code class=&quot;language-text&quot;&gt;fable-logo&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;fable-text&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Once we’ve updated the tree, we can hook into the render engine by adding custom rules.&lt;/p&gt;
&lt;h3&gt;F# bindings&lt;/h3&gt;
&lt;p&gt;I found that there are TypeScript bindings on &lt;a href=&quot;https://www.npmjs.com/package/@types/markdown-it&quot;&gt;npm&lt;/a&gt;. With &lt;a href=&quot;https://github.com/fable-compiler/ts2fable&quot;&gt;ts2fable&lt;/a&gt; I cooked up some &lt;a href=&quot;https://github.com/nojaf/fable-markdown-extension/blob/master/src/MarkdownIt.fs&quot;&gt;minimal F# bindings&lt;/a&gt; which we can use.&lt;/p&gt;
&lt;h3&gt;Unit tests&lt;/h3&gt;
&lt;p&gt;Since this is a rather tricky situation, we should add some tests first.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;module AdventExtension.Tests.MarkdownPlugin

open Fable.Import.Jest  
open AdventExtension.MarkdownPlugin

jest.unmock(&amp;quot;markdown-it&amp;quot;)

let md = MarkdownItModule.Exports.Invoke().``use``(fableMarkdownPlugin)

test &amp;quot;fable img is rendered&amp;quot; &amp;lt;| fun () -&amp;gt;  
    let input = &amp;quot;:fable:&amp;quot;
    let parsed = md.render input
    expect.Invoke(parsed.StartsWith(&amp;quot;&amp;lt;p&amp;gt;&amp;lt;img class=&amp;#39;fable-logo&amp;#39; src&amp;quot;)).toBeTruthy()

test &amp;quot;fable font is rendered&amp;quot; &amp;lt;| fun () -&amp;gt;  
    let input = &amp;quot;Over the seas 🐉we shall rise🐉!&amp;quot;
    let parsed = md.render input
    expect.Invoke(parsed.Contains(&amp;quot;&amp;lt;span class=&amp;#39;fable&amp;#39;&amp;gt;we shall rise&amp;lt;/span&amp;gt;&amp;quot;)).toBeTruthy()&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The plugin function &lt;code class=&quot;language-text&quot;&gt;fableMarkdownPlugin&lt;/code&gt; looks like&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;module AdventExtension.MarkdownPlugin

open MarkdownItModule  
let fableMarkdownPlugin (md: MarkdownIt) (options: Options) = failwith &amp;quot;Nothing yet&amp;quot;  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inside this function, we need to replace the tokens and add custom render rules.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;module AdventExtension.MarkdownPlugin

open MarkdownItModule  
open Fable.Core  
open AdventExtension.Parser

[&amp;lt;Emit(&amp;quot;new $0.Token($1,$2,$3)&amp;quot;)&amp;gt;]
let createToken state name tag nesting: Token = jsNative

[&amp;lt;Emit(&amp;quot;$0[$1] = $2&amp;quot;)&amp;gt;]
let addRenderRule rules name fn: unit = jsNative

let fableMarkdownPlugin (md: MarkdownIt) (options: Options) =  
    // Phase one: replace text tokens to custom tokens
    let replaceTokens (state: State) =
        let parseTextToken (parentToken: Token) (textToken: Token) = 
            let textContent = textToken.content
            let parsedContent = parseText textContent
            let updatedChildren =
                if not parsedContent.status then
                    Array.empty
                else
                    parsedContent.value
                    |&amp;gt; Array.map (fun node -&amp;gt;
                        match node with
                        | ParserResult.Text text -&amp;gt;
                            let t = createToken state &amp;quot;text&amp;quot; &amp;quot;&amp;quot; 0
                            t.content &amp;lt;- text
                            t

                        | ParserResult.FableLogo _ -&amp;gt;
                            createToken state &amp;quot;fable-logo&amp;quot; &amp;quot;img&amp;quot; 0

                        | ParserResult.FableFontText fontText -&amp;gt;
                            let t = createToken state &amp;quot;fable-font&amp;quot; &amp;quot;span&amp;quot; 0
                            t.content &amp;lt;- fontText.value.Replace(&amp;quot;🐉&amp;quot;, &amp;quot;&amp;quot;)
                            t
                    )

            parentToken.children &amp;lt;- new ResizeArray&amp;lt;Token&amp;gt;(updatedChildren)

        let rec parseToken (parentToken: Token) (token: Token) =
            if token.children &amp;lt;&amp;gt; null &amp;amp;&amp;amp; not(Seq.isEmpty token.children) then
                token.children
                |&amp;gt; Seq.iter (fun childToken -&amp;gt;
                    if childToken.``type`` = &amp;quot;inline&amp;quot; then
                        parseToken token childToken
                    else
                        parseTextToken token childToken 
                )

            if token.``type`` = &amp;quot;text&amp;quot; then
                parseTextToken parentToken token

        state.tokens
        |&amp;gt; Seq.filter (fun t -&amp;gt; t.``type`` = &amp;quot;inline&amp;quot; &amp;amp;&amp;amp; t.children &amp;lt;&amp;gt; null &amp;amp;&amp;amp; not (Seq.isEmpty t.children))
        |&amp;gt; Seq.iter (fun token -&amp;gt;
            token.children
            |&amp;gt; Seq.iter (parseToken token)
        )

    md.core.ruler.push(&amp;quot;fable&amp;quot;, replaceTokens)&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This code might not look like much, but we are traversing the tree, replacing the &lt;code class=&quot;language-text&quot;&gt;children&lt;/code&gt; of a parent node that contains &lt;code class=&quot;language-text&quot;&gt;text&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Our unit tests remain unaffected, as the render part will just ignore the &lt;code class=&quot;language-text&quot;&gt;fable-logo&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;fable-text&lt;/code&gt; tokens and render them as regular &lt;code class=&quot;language-text&quot;&gt;text&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Part two determines how our own nodes should render:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;[&amp;lt;Emit(&amp;quot;$0[$1] = $2&amp;quot;)&amp;gt;]
let addRenderRule rules name fn: unit = jsNative

let fableMarkdownPlugin (md: MarkdownIt) (options: Options) = ...  
    // Phase one ...

    // Phase two
    let renderFableLogo tokens idx = &amp;quot;&amp;lt;img class=&amp;#39;fable-logo&amp;#39; src=&amp;#39;data:image/png;base64,iVBORw0KGgoAAAANSUhEU...&amp;#39; /&amp;gt;&amp;quot;

    let renderFableText (tokens: Token array) (idx: int) =
        let token = tokens.[idx]
        sprintf &amp;quot;&amp;lt;span class=&amp;#39;fable&amp;#39;&amp;gt;%s&amp;lt;/span&amp;gt;&amp;quot; (token.content.Replace(&amp;quot;🐉&amp;quot;, &amp;quot;&amp;quot;))

    addRenderRule md.renderer.rules &amp;quot;fable-logo&amp;quot; (new System.Func&amp;lt;Token array,int,string&amp;gt;(fun tokens idx -&amp;gt; renderFableLogo tokens idx))
    addRenderRule md.renderer.rules &amp;quot;fable-font&amp;quot; (new System.Func&amp;lt;Token array,int,string&amp;gt;(fun tokens idx -&amp;gt; renderFableText tokens idx))&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We need to wrap our render functions inside a &lt;code class=&quot;language-text&quot;&gt;System.Func&amp;lt;_,_,_&amp;gt;&lt;/code&gt; in order to preserve compatibility with JavaScript.&lt;br&gt;
The reason for this is that Fable compiles these into functions that can be curried, and markdown-it doesn’t like this.&lt;/p&gt;
&lt;p&gt;Once more our tests show green, and the times has come to shove this into our VS Code extension.&lt;/p&gt;
&lt;h3&gt;Tag on code&lt;/h3&gt;
&lt;p&gt;To see all this in code we need to extend the &lt;code class=&quot;language-text&quot;&gt;contributes&lt;/code&gt; section in our &lt;code class=&quot;language-text&quot;&gt;package.json&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;  &amp;quot;contributes&amp;quot;: {
    &amp;quot;markdown.markdownItPlugins&amp;quot;: true,
    &amp;quot;markdown.previewStyles&amp;quot;: [
      &amp;quot;./fable.css&amp;quot;
    ]
  }&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Create a &lt;code class=&quot;language-text&quot;&gt;fable.css&lt;/code&gt; file&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;// this works in code, I was somewhat surprised by this. Should be a local url in real world scenario.
@import url(&amp;#39;https://fonts.googleapis.com/css?family=Josefin+Slab:400,600i&amp;#39;); 

.fable {
    font-family: &amp;#39;Josefin Slab&amp;#39;, serif;
    font-weight: 600;
    font-style: italic;
    color: #87c5fd;
    font-size: 18px;
}

.fable-logo {
    display: inline-block;
    width: 24px;
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And make the final change to &lt;code class=&quot;language-text&quot;&gt;Extension.fs&lt;/code&gt; by adding&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;    // Add render plugin
    createObj [
        &amp;quot;extendMarkdownIt&amp;quot; ==&amp;gt; (fun md -&amp;gt; md?``use``(MarkdownPlugin.fableMarkdownPlugin))
    ]&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;at the end.&lt;/p&gt;
&lt;p&gt;Final outcome:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 459px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/975c1e5833c830738e040a5169778c37/1f645/preview-after.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.605664488017425%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB10lEQVQoz4WSW3eaQBSF+f+v/Qd97FptH7qSNiHNxRpjKyCUi4DRKDcvUUHkYhKTncNAE2td6cO3zpxhZs/ew3CKrWF808JoIMC/EeH1BdhaHWNHpl5AMJAwGrYZXeOS1WH3F647DTbuW1eYuDLCiYHFRAfXNerQlAtc/jyFIfFQRR4aYatnUKQTqDSnt09gyt9h/T7DNNAxY2hMpKjxrYX5SEefDuGk+geI4jmOajzExhe0GgfQpWOYbR7N5je0rg4gEppwhJ5+gXBabDYQjgs6iCadUpCEbfUHOEs9RTo3gdzBU+4Ca49qSTku57D28Zi5Ve9Xc9U6ovi2SR1wQv0jsrALfyBDah5Da5/DuW6hbzbZuKCj1Ni93noqEyg27lIIFnA2OVzNLGySAZZ0J9HEpN5mMYo4S6phFSsLe3hIhrgnHna4r+DExmfkCwuzaITpIqAYdFL+GnubP7HegtPEr8hIME0CjMY9zDwZjyzCvzxVdVPF2wdzmMwtcuXjLnGQxQ7WKw/rxEO+euUucV8qE033u+Vq/Huk5DAjh/PQxyIKGPHSRxJ7CCOfKPslkcbei+Beh6bC008w2RPYjbfNX5FTt1q3R/Dw0ztyaG89B/e/vOXwGab8dsZZOYzaAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;preview after&quot;
        title=&quot;preview after&quot;
        src=&quot;/static/975c1e5833c830738e040a5169778c37/1f645/preview-after.png&quot;
        srcset=&quot;/static/975c1e5833c830738e040a5169778c37/00d96/preview-after.png 148w,
/static/975c1e5833c830738e040a5169778c37/0b23c/preview-after.png 295w,
/static/975c1e5833c830738e040a5169778c37/1f645/preview-after.png 459w&quot;
        sizes=&quot;(max-width: 459px) 100vw, 459px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;The Source&lt;/h2&gt;
&lt;p&gt;You can find all code on my &lt;a href=&quot;https://github.com/nojaf/fable-markdown-extension&quot;&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Remarks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;The extension has not been published in the store, nor do I have the intention to so.&lt;/li&gt;
&lt;li&gt;This was my first &lt;strong&gt;VS Code&lt;/strong&gt; and &lt;strong&gt;markdown-it&lt;/strong&gt; plugin, so there is some room for improvement.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;fable-splitter&lt;/code&gt; is very fast. I didn’t miss &lt;code class=&quot;language-text&quot;&gt;fable-loader&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;webpack&lt;/code&gt; for a single moment.&lt;/li&gt;
&lt;li&gt;Many thanks to &lt;a href=&quot;https://github.com/Zaid-Ajaj&quot;&gt;Zaid Ajaj&lt;/a&gt; for the help with Fable.Parsimmon.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;I hope you enjoyed this blogpost and it all makes sense to you. If you have any suggestions or questions, please leave a comment.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;
&lt;p&gt;Photo by &lt;a style=&quot;background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px&quot; href=&quot;https://unsplash.com/@playjack01?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; title=&quot;Download free do whatever you want high-resolution photos from Massimo Rinaldi&quot;&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; style=&quot;height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white&quot; viewBox=&quot;0 0 32 32&quot;&gt;&lt;title&gt;unsplash-logo&lt;/title&gt;&lt;path d=&quot;M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;Massimo Rinaldi&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React hooks preview with Fable]]></title><description><![CDATA[Introduction A couple of weeks ago Facebook presented React hooks, a new way of accessing React features inside functional components. In…]]></description><link>https://blog.nojaf.com/react-hooks-fable/</link><guid isPermaLink="false">https://blog.nojaf.com/react-hooks-fable/</guid><pubDate>Sat, 10 Nov 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;A couple of weeks ago Facebook presented &lt;a href=&quot;https://reactjs.org/docs/hooks-overview.html&quot;&gt;React hooks&lt;/a&gt;, a new way of accessing React features inside functional components.&lt;/p&gt;
&lt;p&gt;In this blogpost I would like to show that the new hooks can easily be used in combination with &lt;a href=&quot;https://fable.io&quot;&gt;Fable&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Disclaimer:&lt;/strong&gt; Hooks are an experimental proposal to React, currently available in &lt;code class=&quot;language-text&quot;&gt;16.7 alpha&lt;/code&gt;, and the api is not final yet. Use at your own risk.&lt;/p&gt;
&lt;h2&gt;useState()&lt;/h2&gt;
&lt;p&gt;A first example of a hook is &lt;a href=&quot;https://reactjs.org/docs/hooks-state.html&quot;&gt;useState()&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SetState&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&apos;t&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &apos;t &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; unit  
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; useState&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&apos;t&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &apos;t&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&apos;t &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; SetState&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&apos;t&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; import &lt;span class=&quot;token string&quot;&gt;&quot;useState&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When the &lt;code class=&quot;language-text&quot;&gt;useState&lt;/code&gt; hook is called, we receive a variable representing the state and a function to update the state.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setName&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;nojaf&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that &lt;code class=&quot;language-text&quot;&gt;useState&lt;/code&gt; accepts a default value for the state.&lt;/p&gt;
&lt;p&gt;To demonstrate this hook, we will create a todo list application.&lt;/p&gt;
&lt;h3&gt;custom useInputValue hook&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;useState&lt;/code&gt; can also be used as a building block to create our own hook:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; useInputValue &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;initialValue &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useState &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;initialValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; onChange &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Fable&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Import&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;FormEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; value &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;value
        setValue &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; setValue &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Empty&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onChange&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; resetValue&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;useInputValue&lt;/code&gt; provides an easy way to capture text from an input field.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FormProps&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; OnSubmit &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;string &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; unit&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; formComponent &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FormProps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onChange&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; resetValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useInputValue &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; onSubmit &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ev &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FormEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        ev&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;OnSubmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;resetValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    form &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; OnSubmit onSubmit&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        input &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; Value value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; OnChange onChange&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; Placeholder &lt;span class=&quot;token string&quot;&gt;&quot;Enter todo&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; ClassName &lt;span class=&quot;token string&quot;&gt;&quot;input&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;formComponent&lt;/code&gt; is an ideal &lt;em&gt;dumb component&lt;/em&gt; to which we can add our todo from our &lt;em&gt;smart component&lt;/em&gt;.&lt;/p&gt;
&lt;h3&gt;Top level component&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;appComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;todos&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setTodos&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useState&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Todo list&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; toggleComplete i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        todos
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mapi &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; k todo &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; k &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; todo &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; Complete &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;not&lt;/span&gt; todo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Complete &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; todo
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; setTodos

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; renderTodos &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        todos
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mapi &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; idx todo &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; style &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
                CSSProp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;TextDecoration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; todo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Complete &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;line-through&quot;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;singleton

            &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sprintf &lt;span class=&quot;token string&quot;&gt;&quot;todo_%i&quot;&lt;/span&gt; idx

            div &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; Key key&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;OnClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; toggleComplete idx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                label &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ClassName &lt;span class=&quot;token string&quot;&gt;&quot;checkbox&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; Style style&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
                    input &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Type &lt;span class=&quot;token string&quot;&gt;&quot;checkbox&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; Checked todo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Complete&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;OnChange&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;  toggleComplete idx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                    str todo&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Text
                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; onSubmit text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; text&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; Complete &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;singleton
            &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;@&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; todos
            &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; setTodos

    div &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        h1 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; Class &lt;span class=&quot;token string&quot;&gt;&quot;title is-4&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; str &lt;span class=&quot;token string&quot;&gt;&quot;Todos&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        ofFunction &lt;span class=&quot;token computation-expression keyword&quot;&gt;formComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; OnSubmit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; onSubmit &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        div &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ClassName &lt;span class=&quot;token string&quot;&gt;&quot;notification&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; renderTodos
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice how we can use hooks at multiple levels and &lt;strong&gt;how well this works together with F#&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;useReducer()&lt;/h2&gt;
&lt;p&gt;The next hook we will explorer is &lt;a href=&quot;https://reactjs.org/docs/hooks-reference.html#usereducer&quot;&gt;useReducer()&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ReduceFn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&apos;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&apos;msg&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&apos;state &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &apos;msg &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &apos;state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Dispatch&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&apos;msg&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&apos;msg &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; unit  
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; useReducer&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&apos;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&apos;msg&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ReduceFn&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&apos;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&apos;msg&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;initialState&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&apos;state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&apos;state &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; Dispatch&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&apos;msg&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; import &lt;span class=&quot;token string&quot;&gt;&quot;useReducer&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This has an extremely Elm/Redux/Elmish vibe to it, so let’s build the mandatory counter example. The code is so self-explanatory that you should instantly see where this is going.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Increase
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Decrease
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Reset

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; intialState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; update model msg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;match&lt;/span&gt; msg &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Increase &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; model &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; Value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Value &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Decrease &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; model &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; Value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Value &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Reset &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; intialState

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; reducerComponent &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dispatch&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useReducer update intialState

    div &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        button &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ClassName &lt;span class=&quot;token string&quot;&gt;&quot;button&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; OnClick &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; dispatch Increase&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;str &lt;span class=&quot;token string&quot;&gt;&quot;Increase&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        button &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ClassName &lt;span class=&quot;token string&quot;&gt;&quot;button&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; OnClick &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; dispatch Decrease&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;str &lt;span class=&quot;token string&quot;&gt;&quot;Decrease&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        button &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ClassName &lt;span class=&quot;token string&quot;&gt;&quot;button&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; OnClick &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; _ &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; dispatch Reset&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;str &lt;span class=&quot;token string&quot;&gt;&quot;Reset&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        p &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ClassName &lt;span class=&quot;token string&quot;&gt;&quot;title is-2 has-text-centered&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;sprintf &lt;span class=&quot;token string&quot;&gt;&quot;%i&quot;&lt;/span&gt; model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Value &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; str&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And there you have it. I believe this will be a nice alternative to Elmish if you are building something small.&lt;/p&gt;
&lt;h2&gt;useEffect()&lt;/h2&gt;
&lt;p&gt;Lastly, a demo on &lt;a href=&quot;https://reactjs.org/docs/hooks-reference.html#useeffect&quot;&gt;useEffect()&lt;/a&gt;, think of it as a way to launch side effects when a component renders.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; useEffect &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;effect&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unit &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; U2&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;unit&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;unit &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; unit&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dependsOn&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;obj&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; unit &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; import &lt;span class=&quot;token string&quot;&gt;&quot;useEffect&quot;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We would like to download a list of github repositories of a selected user/organization.&lt;/p&gt;
&lt;p&gt;For the download itself we use &lt;code class=&quot;language-text&quot;&gt;fetch&lt;/code&gt; from &lt;a href=&quot;http://fable.io/fable-powerpack/&quot;&gt;Fable.PowerPack&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; githubUsers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
        &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fable-compiler&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fsprojects&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;nojaf&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; decodeRepoItem &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    Decode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;field &lt;span class=&quot;token string&quot;&gt;&quot;name&quot;&lt;/span&gt; Decode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;string

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; decodeResonse &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Decode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array decodeRepoItem

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; loadRepos updateRepos user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; sprintf &lt;span class=&quot;token string&quot;&gt;&quot;https://api.github.com/users/%s/repos&quot;&lt;/span&gt; user
    Fetch&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fetch url &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bind &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;map &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; json &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; Decode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fromString decodeResonse json&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mapResult updateRepos
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; ignore&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This code will execute the &lt;code class=&quot;language-text&quot;&gt;updateRepos&lt;/code&gt; function when the download was successful and the decoding of the json worked out.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;effectComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; options &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        githubUsers
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;map &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            option &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; Value name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; Key name &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; str name &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;@&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;List&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;singleton &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;option &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Value &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; Key &lt;span class=&quot;token string&quot;&gt;&quot;empty&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;selectedOrg&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setOrganisation&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; useState &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;repos&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; setRepos&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;useState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;empty&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; onChange &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ev &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FormEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; setOrganisation &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ev&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    useEffect &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;match&lt;/span&gt; System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;IsNullOrWhiteSpace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;selectedOrg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; setRepos Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;empty
        &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; loadRepos setRepos selectedOrg
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; U2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Case1
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; selectedOrg &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; repoListItems &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
        repos
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sortWith &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; a b &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; String&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Compare&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;b&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;StringComparison&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;OrdinalIgnoreCase&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; Array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;map &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; r &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; li &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;Key r&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;str r&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    div &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ClassName &lt;span class=&quot;token string&quot;&gt;&quot;content&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
        div &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ClassName &lt;span class=&quot;token string&quot;&gt;&quot;select&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; Value selectedOrg&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; OnChange onChange &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; options
        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        ul &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; repoListItems
    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let us take a closer look to the &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; code:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;fsharp&quot;&gt;&lt;pre class=&quot;language-fsharp&quot;&gt;&lt;code class=&quot;language-fsharp&quot;&gt;useEffect &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;fun&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;match&lt;/span&gt; System&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;String&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;IsNullOrWhiteSpace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;selectedOrg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; loadRepos setRepos selectedOrg
    &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; U2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Case1
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; selectedOrg &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The first argument of &lt;code class=&quot;language-text&quot;&gt;useEffect&lt;/code&gt; takes a function that returns &lt;code class=&quot;language-text&quot;&gt;unit&lt;/code&gt; or a &lt;code class=&quot;language-text&quot;&gt;new function that returns unit&lt;/code&gt;. The latter can be used to clean up the effect, if for example we were to wire some event handlers.&lt;/p&gt;
&lt;p&gt;That array we pass as second argument with the value of &lt;code class=&quot;language-text&quot;&gt;selectedOrg&lt;/code&gt;, serves to tell the hook that we only need to re-evaluate when that value changes.&lt;/p&gt;
&lt;h2&gt;The Source&lt;/h2&gt;
&lt;p&gt;All samples can be found on &lt;a href=&quot;https://github.com/nojaf/fable-react-hooks-sample&quot;&gt;github&lt;/a&gt;, or you can try them &lt;a href=&quot;https://nojaf.github.io/fable-react-hooks-sample/#&quot;&gt;online&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Remarks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I liked how easy it was to create bindings for hooks. Fable clearly is a match for this.&lt;/li&gt;
&lt;li&gt;Hooks work really well for small application. I believe they might also shine in larger applications. To be investigated.&lt;/li&gt;
&lt;li&gt;You need React &lt;code class=&quot;language-text&quot;&gt;16.7.0-alpha.0&lt;/code&gt; to play with hooks.&lt;/li&gt;
&lt;li&gt;If you are using webpack, hot module reloading and hooks don’t mix at the time of writing.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;I hope you enjoyed this blogpost and it all makes sense to you. If you have any suggestions or questions, please leave a comment.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;
&lt;p&gt;Photo by &lt;a style=&quot;background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px&quot; href=&quot;https://unsplash.com/@ravenwolfab?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; title=&quot;Download free do whatever you want high-resolution photos from Alan Bishop&quot;&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; style=&quot;height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white&quot; viewBox=&quot;0 0 32 32&quot;&gt;&lt;title&gt;unsplash-logo&lt;/title&gt;&lt;path d=&quot;M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;Alan Bishop&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Fantomas 2.8: global .NET Core cli tool!]]></title><description><![CDATA[Hi all, A quick update regarding the new release of the Fantomas project. There is a new and shiny global .NET Core cli tool. Install…]]></description><link>https://blog.nojaf.com/fantomas-2-8/</link><guid isPermaLink="false">https://blog.nojaf.com/fantomas-2-8/</guid><pubDate>Sat, 07 Jul 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;Hi all,&lt;/p&gt;
&lt;p&gt;A quick update regarding the new release of the &lt;a href=&quot;https://github.com/dungpa/fantomas&quot;&gt;Fantomas&lt;/a&gt; project.&lt;/p&gt;
&lt;p&gt;There is a new and shiny &lt;a href=&quot;https://www.nuget.org/packages/fantomas-tool/&quot;&gt;global .NET Core cli tool&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Install:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;dotnet tool install -g fantomas-tool&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The &lt;code class=&quot;language-text&quot;&gt;fantomas&lt;/code&gt; executable will be added to your path.&lt;/p&gt;
&lt;p&gt;Another new feature is the &lt;a href=&quot;https://github.com/dungpa/fantomas/blob/master/docs/Documentation.md#preferences&quot;&gt;—preserveEOL&lt;/a&gt; option.&lt;br&gt;
This will respect &lt;a href=&quot;https://github.com/dungpa/fantomas/issues/143&quot;&gt;additional newlines after formatting&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can check the &lt;a href=&quot;https://github.com/dungpa/fantomas/blob/master/RELEASE_NOTES.md&quot;&gt;release notes&lt;/a&gt; for all changes in the 2.8 version.&lt;/p&gt;
&lt;p&gt;Last but not least there is a rumor that the project might move to the &lt;a href=&quot;https://github.com/fsprojects&quot;&gt;fsprojects&lt;/a&gt; organization. This could lead to more people being involved in the project.&lt;/p&gt;
&lt;p&gt;Many thanks for everyone that was involved in this release.&lt;/p&gt;
&lt;p&gt;Enjoy,&lt;/p&gt;
&lt;p&gt;le mec nojaf&lt;/p&gt;
&lt;p&gt;UPDATE: Fantomas did indeed move to &lt;a href=&quot;https://github.com/fsprojects/fantomas&quot;&gt;fsprojects&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Photo by &lt;a style=&quot;background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px&quot; href=&quot;https://unsplash.com/@valentindotxyz?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; title=&quot;Download free do whatever you want high-resolution photos from Valentin&quot;&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; style=&quot;height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white&quot; viewBox=&quot;0 0 32 32&quot;&gt;&lt;title&gt;unsplash-logo&lt;/title&gt;&lt;path d=&quot;M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;Valentin&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Fantomas rejuvenated: .NET cli tool]]></title><description><![CDATA[Introduction As part of the F# mentorship program my mentor Anthony Lloyd and I have been working on the Fantomas project. Fantomas is like…]]></description><link>https://blog.nojaf.com/fantomas-rejuvenated/</link><guid isPermaLink="false">https://blog.nojaf.com/fantomas-rejuvenated/</guid><pubDate>Thu, 03 May 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;As part of the &lt;a href=&quot;https://fsharp.org/mentorship/index.html&quot;&gt;F# mentorship program&lt;/a&gt; my mentor &lt;a href=&quot;http://anthonylloyd.github.io&quot;&gt;Anthony Lloyd&lt;/a&gt; and I have been working on the &lt;a href=&quot;https://github.com/dungpa/fantomas&quot;&gt;Fantomas project&lt;/a&gt;.&lt;br&gt;
Fantomas is like &lt;a href=&quot;https://prettier.io&quot;&gt;prettier&lt;/a&gt; or &lt;a href=&quot;https://github.com/avh4/elm-format&quot;&gt;elm-format&lt;/a&gt; but for F#.&lt;br&gt;
It was originally created by Anh-Dung Phan and people have suggested that it could be a part of the&lt;br&gt;
&lt;a href=&quot;https://github.com/Microsoft/visualfsharp/pull/3542&quot;&gt;F# Compiler Service&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Fantomas is like &lt;a href=&quot;https://prettier.io&quot;&gt;prettier&lt;/a&gt; or &lt;a href=&quot;https://github.com/avh4/elm-format&quot;&gt;elm-format&lt;/a&gt; but for F#.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;.NET Core&lt;/h2&gt;
&lt;p&gt;The source code of Fantomas is quite advanced so our approach is to focus first on improving the project in general. We noticed it was a bit old in terms of Visual Studio version and dependencies, so we organized the move to &lt;a href=&quot;https://github.com/dungpa/fantomas/pull/236&quot;&gt;.NET Core&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The port had its challenges but in the end, we were able to release &lt;a href=&quot;https://www.nuget.org/packages/dotnet-fantomas/&quot;&gt;dotnet-fantomas&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Test drive&lt;/h2&gt;
&lt;h3&gt;NuGet&lt;/h3&gt;
&lt;p&gt;Added the following code to your &lt;code class=&quot;language-text&quot;&gt;fsproj&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;&amp;lt;ItemGroup&amp;gt;  
    &amp;lt;DotNetCliToolReference Include=&amp;quot;dotnet-fantomas&amp;quot; Version=&amp;quot;2.7.1&amp;quot; /&amp;gt;
&amp;lt;/ItemGroup&amp;gt;  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Execute &lt;code class=&quot;language-text&quot;&gt;dotnet restore&lt;/code&gt; and you should be able to run &lt;code class=&quot;language-text&quot;&gt;dotnet fantomas YourFile.fs&lt;/code&gt;.&lt;br&gt;
Check out &lt;code class=&quot;language-text&quot;&gt;dotnet fantomas --help&lt;/code&gt; for more options.&lt;/p&gt;
&lt;h3&gt;Paket&lt;/h3&gt;
&lt;p&gt;Add &lt;code class=&quot;language-text&quot;&gt;clitool dotnet-fantomas 2.7.1&lt;/code&gt; to your &lt;code class=&quot;language-text&quot;&gt;paket.dependencies&lt;/code&gt;.&lt;br&gt;
Add &lt;code class=&quot;language-text&quot;&gt;dotnet-fantomas&lt;/code&gt; to your &lt;code class=&quot;language-text&quot;&gt;paket.references&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Execute &lt;code class=&quot;language-text&quot;&gt;.paket\paket.exe install&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;dotnet fantomas YourFile.fs&lt;/code&gt; should work as well.&lt;/p&gt;
&lt;h2&gt;We need your help&lt;/h2&gt;
&lt;p&gt;Fantomas still has room for improvement. If we each format one source file and raise an issue on github if things go south, we’d have all the usage coverage we need.&lt;/p&gt;
&lt;p&gt;There are still scenarios were the formatting will fail or introduce compile errors. The more concrete examples we have, the easier it is to fix bugs.&lt;/p&gt;
&lt;p&gt;Please dear community, give it a spin and write a detailed issue if necessary. Tell us what went wrong, what you’d expected, what framework version you used, why it should format differently, …&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If we each format one source file and raise an issue on github if things go south, we’d have all the usage coverage we need.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ping us on the &lt;a href=&quot;https://fsharp.slack.com&quot;&gt;F# Slack&lt;/a&gt;, any feedback is most welcome.&lt;/p&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;I hope you enjoyed this &lt;a href=&quot;https://www.nuget.org/packages/dotnet-fantomas/&quot;&gt;NuGet package&lt;/a&gt; and can use it in your F# workflow.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;
&lt;p&gt;Photo by &lt;a style=&quot;background-color:black;color:white;text-decoration:none;padding:4px 6px;font-family:-apple-system, BlinkMacSystemFont, &amp;quot;San Francisco&amp;quot;, &amp;quot;Helvetica Neue&amp;quot;, Helvetica, Ubuntu, Roboto, Noto, &amp;quot;Segoe UI&amp;quot;, Arial, sans-serif;font-size:12px;font-weight:bold;line-height:1.2;display:inline-block;border-radius:3px&quot; href=&quot;https://unsplash.com/@anniespratt?utm_medium=referral&amp;amp;utm_campaign=photographer-credit&amp;amp;utm_content=creditBadge&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot; title=&quot;Download free do whatever you want high-resolution photos from Annie Spratt&quot;&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; style=&quot;height:12px;width:auto;position:relative;vertical-align:middle;top:-2px;fill:white&quot; viewBox=&quot;0 0 32 32&quot;&gt;&lt;title&gt;unsplash-logo&lt;/title&gt;&lt;path d=&quot;M10 9V0h12v9H10zm12 5h10v18H0V14h10v9h12v-9z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/span&gt;&lt;span style=&quot;display:inline-block;padding:2px 3px&quot;&gt;Annie Spratt&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Building Fable apps inside a Docker container]]></title><description><![CDATA[Introduction Want to use Docker to develop Fable applications? What if I told you it isn’t all that difficult? TLDR; How to user Docker with…]]></description><link>https://blog.nojaf.com/fable-docker/</link><guid isPermaLink="false">https://blog.nojaf.com/fable-docker/</guid><pubDate>Sat, 20 Jan 2018 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Want to use Docker to develop Fable applications? What if I told you it isn’t all that difficult?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;TLDR; How to user Docker with Fable.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Docker&lt;/h2&gt;
&lt;p&gt;So the first step with Docker images is that you check whether a suiting image that fits your needs already exists.&lt;br&gt;
When I checked Docker Hub for any recent images with the Fable tool chain I didn’t really find anything that works with &lt;em&gt;Fable 1.x&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;I accepted the fact that I would have to create the image myself.&lt;br&gt;
If you check the &lt;a href=&quot;http://fable.io/docs/getting-started.html#requirements&quot;&gt;docs&lt;/a&gt; for requirements, we’ll need:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.microsoft.com/net&quot;&gt;.NET Core&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://nodejs.org/en/&quot;&gt;Node js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.mono-project.com&quot;&gt;Mono&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Docker compose approach&lt;/h3&gt;
&lt;p&gt;At first I thought that I would need two containers. One with Mono to restore the dependencies with &lt;a href=&quot;https://fsprojects.github.io/Paket/&quot;&gt;paket&lt;/a&gt; and the other to start the Fable daemon and compile the F# code.&lt;/p&gt;
&lt;p&gt;The Mono image exists but I could find one where both .NET Core and Node js were installed.&lt;br&gt;
I tried to create an image starting from &lt;a href=&quot;https://hub.docker.com/r/microsoft/dotnet/&quot;&gt;microsoft/dotnet&lt;/a&gt; and add Node to it.&lt;br&gt;
Well that quickly &lt;a href=&quot;https://github.com/nodejs/docker-node/issues/600&quot;&gt;backfired&lt;/a&gt; and I tried the other way around: starting from the &lt;a href=&quot;https://github.com/nodejs/docker-node/blob/df8782dfddf8c70663f0a7d19942120b1d6977a5/9/Dockerfile&quot;&gt;Node image&lt;/a&gt; and installing .NET Core. Victory was mine and I create a &lt;a href=&quot;https://docs.docker.com/compose/&quot;&gt;Docker compose file&lt;/a&gt; with both containers listed.&lt;/p&gt;
&lt;p&gt;To keep our head in the game, let’s call the Mono container the &lt;strong&gt;MC&lt;/strong&gt; and the .NET/Node container &lt;strong&gt;NNC&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;docker-compose up&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Creating two containers linked in a network&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now I was able to create a new Fable app using &lt;code class=&quot;language-text&quot;&gt;dotnet new fable&lt;/code&gt;. (I already installed the templates in the &lt;strong&gt;NNC&lt;/strong&gt; image). Next up was using the &lt;strong&gt;MC&lt;/strong&gt; to restore the packages. Then you &lt;code class=&quot;language-text&quot;&gt;cd src&lt;/code&gt; into the source folder and hit &lt;code class=&quot;language-text&quot;&gt;dotnet restore&lt;/code&gt;. This will make sure the &lt;em&gt;fsproj&lt;/em&gt; finds the dlls stored by paket, I guess. To be completely honest &lt;em&gt;paket&lt;/em&gt; is still a mystery to me half the times.&lt;/p&gt;
&lt;p&gt;And that was the point where &lt;strong&gt;the docker compose plan hit a wall&lt;/strong&gt;. You see &lt;code class=&quot;language-text&quot;&gt;dotnet restore&lt;/code&gt; calls paket, and paket needs &lt;em&gt;Mono&lt;/em&gt; to run in the first place. Because paket doesn’t yet run on .NET Core.&lt;/p&gt;
&lt;p&gt;So the conclusion was that I need one image that contains everything.&lt;/p&gt;
&lt;h3&gt;nojaf/Fable&lt;/h3&gt;
&lt;p&gt;With the previous problems kept in mind it wasn’t all that hard to create the image.&lt;br&gt;
Start from &lt;strong&gt;Node&lt;/strong&gt;, add &lt;strong&gt;.NET Core&lt;/strong&gt; and finish up by installing &lt;strong&gt;Mono&lt;/strong&gt;.&lt;br&gt;
You can find the image on &lt;a href=&quot;https://hub.docker.com/r/nojaf/fable/&quot;&gt;Docker Hub&lt;/a&gt; or on &lt;a href=&quot;https://github.com/nojaf/fable-docker/blob/master/Dockerfile&quot;&gt;Github&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Building a new app&lt;/h2&gt;
&lt;h3&gt;New project&lt;/h3&gt;
&lt;p&gt;Create a new folder first. I’m currently on Windows and using Powershell, the steps are very similar on other operating systems.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;PS&lt;/span&gt; C:\Users\nojaf\Projects&gt; mkdir my&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new-fable&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;app  
&lt;span class=&quot;token function&quot;&gt;PS&lt;/span&gt; C:\Users\nojaf\Projects&gt; cd my&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new-fable&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;app&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Run the Docker image, map port &lt;code class=&quot;language-text&quot;&gt;8080&lt;/code&gt; and add the current folder as a volume.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;powershell&quot;&gt;&lt;pre class=&quot;language-powershell&quot;&gt;&lt;code class=&quot;language-powershell&quot;&gt;&lt;span class=&quot;token function&quot;&gt;PS&lt;/span&gt; C:\Users\nojaf\Projects\my&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new-fable&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;app&gt; &lt;span class=&quot;token variable&quot;&gt;$path&lt;/span&gt; = &lt;span class=&quot;token string&quot;&gt;&quot;&lt;span class=&quot;token function&quot;&gt;$&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pwd&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;C:\&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/c/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;\&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token function&quot;&gt;PS&lt;/span&gt; C:\Users\nojaf\Projects\my&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;new-fable&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;app&gt; docker run &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;it &lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;v &lt;span class=&quot;token string&quot;&gt;&quot;${path}:/usr/src/app&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;w &lt;span class=&quot;token string&quot;&gt;&quot;/usr/src/app&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;p 8080:8080 nojaf&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;fable bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once inside the container you can just create project with &lt;code class=&quot;language-text&quot;&gt;dotnet new fable&lt;/code&gt;.&lt;br&gt;
The &lt;a href=&quot;https://github.com/fable-compiler/fable-templates/tree/master/simple/Content&quot;&gt;Fable Simple Template&lt;/a&gt; and the &lt;a href=&quot;https://github.com/fable-elmish/templates&quot;&gt;Elmish template&lt;/a&gt; are already installed in this image.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;root@7e9435460a64:/usr/src/app&lt;span class=&quot;token comment&quot;&gt;# dotnet new fable -lang F#&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Restore the packages&lt;/h3&gt;
&lt;p&gt;At this point you can perfectly follow the steps writing in the Fable docs.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;bash&quot;&gt;&lt;pre class=&quot;language-bash&quot;&gt;&lt;code class=&quot;language-bash&quot;&gt;root@7e9435460a64:/usr/src/app&lt;span class=&quot;token comment&quot;&gt;# mono .paket/paket.exe install  &lt;/span&gt;
root@7e9435460a64:/usr/src/app&lt;span class=&quot;token comment&quot;&gt;# npm i  &lt;/span&gt;
root@7e9435460a64:/usr/src/app&lt;span class=&quot;token comment&quot;&gt;# cd src  &lt;/span&gt;
root@7e9435460a64:/usr/src/app/src&lt;span class=&quot;token comment&quot;&gt;# dotnet restore&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you want to use &lt;a href=&quot;https://yarnpkg.com/en/&quot;&gt;yarn&lt;/a&gt; instead of npm that’s fine, it is also included in the image.&lt;/p&gt;
&lt;h3&gt;Running the app&lt;/h3&gt;
&lt;p&gt;All we need to do is start the Fable daemon to compile the code. Although this will work, we will need some tweaking to the &lt;em&gt;webpack&lt;/em&gt; config.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;root@7e9435460a64:/usr/src/app/src# dotnet fable npm-start  &lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you browse to &lt;em&gt;&lt;a href=&quot;http://localhost:8080&quot;&gt;http://localhost:8080&lt;/a&gt;&lt;/em&gt; you wouldn’t be able to connect. But why? Didn’t we map the ports in Docker when we ran the &lt;code class=&quot;language-text&quot;&gt;run&lt;/code&gt; command? Yeah, we did, but Docker can’t figure out how to map &lt;em&gt;localhost:8080&lt;/em&gt; to our desktop. It can figure out &lt;strong&gt;&lt;a href=&quot;http://0.0.0.0:8080&quot;&gt;http://0.0.0.0:8080&lt;/a&gt;&lt;/strong&gt; though.&lt;/p&gt;
&lt;p&gt;So we’ll need to change the webpack config &lt;a href=&quot;https://webpack.js.org/configuration/dev-server/#devserver-host&quot;&gt;devServer host setting&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  devServer&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    contentBase&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./public&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    port&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8080&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    host&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0.0.0.0&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Ow yeah, we now see our Fable app in our browser.&lt;/p&gt;
&lt;p&gt;Lastly, we want our browser to reload when we make changes to our source files.&lt;br&gt;
Because we make the changes outside the container, the file change events aren’t picked up inside the container.&lt;br&gt;
Luckily, we can configure webpack to &lt;a href=&quot;https://webpack.js.org/configuration/dev-server/#devserver-watchoptions-&quot;&gt;poll our files&lt;/a&gt; to detect changes.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  devServer&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    contentBase&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;./public&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    port&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8080&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    host&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0.0.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    watchOptions&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      poll&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://www.sharegif.com/wp-content/uploads/2013/10/yeah-baby-gif-joey-friends.gif&quot; alt=&quot;Joey approves&quot;&gt;&lt;/p&gt;
&lt;p&gt;And now we’ve hit the sweet spot. Happy coding ya’all.&lt;/p&gt;
&lt;h2&gt;Remarks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I often get warnings in the container saying &lt;code class=&quot;language-text&quot;&gt;perl : warning : Setting locale failed.&lt;/code&gt;. If anyone knows how to deal with those I’m all ears.&lt;/li&gt;
&lt;li&gt;You still need to install F# to get a decent tooling experience, regardless which editor you use.&lt;/li&gt;
&lt;li&gt;Don’t hesitate to make &lt;a href=&quot;https://github.com/nojaf/fable-docker/issues&quot;&gt;an issue on Github&lt;/a&gt; if you encounter any problems.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;I hope you enjoyed this blogpost and it all makes sense. If you have any suggestions or questions please leave a comment.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Adventures in Elm]]></title><description><![CDATA[Introduction 2016 for me personal was the year the I came in serious contact with functional languages. I started looking at F#, applied…]]></description><link>https://blog.nojaf.com/adventures-in-elm/</link><guid isPermaLink="false">https://blog.nojaf.com/adventures-in-elm/</guid><pubDate>Mon, 28 Nov 2016 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;2016 for me personal was the year the I came in serious contact with &lt;strong&gt;functional languages&lt;/strong&gt;. I started looking at F#, applied functional concepts (partial application, immutability, pure functions and so on) in JavaScript, gave RxJS a shot and fell in love with React.&lt;/p&gt;
&lt;p&gt;A logical next step was looking at &lt;strong&gt;Elm&lt;/strong&gt;. I was first introduced to Elm at a &lt;a href=&quot;https://www.meetup.com/socratesbe/events/228173829/&quot;&gt;Socrates Meetup&lt;/a&gt; a while ago by &lt;a href=&quot;https://thomascoopman.eu/&quot;&gt;Thomas Coopman&lt;/a&gt;. To be honest I was a bit overwhelmed at the time and a bit skeptical afterwards.&lt;/p&gt;
&lt;p&gt;I decided to give Elm another shot and learned a lot by following &lt;a href=&quot;http://courses.knowthen.com/p/elm-for-beginners&quot;&gt;Elm for beginners&lt;/a&gt;. Now I feel ready to create small Elm applications.&lt;/p&gt;
&lt;h2&gt;The Christmas presents application&lt;/h2&gt;
&lt;p&gt;We have this family tradition that on Christmas Eve we give presents to each other among cousins. Each cousin or niece draws a name and gives a present to that person.&lt;br&gt;
For a very long time the name drawing was done in a low tech fashion. But in more recent years I create a little application to automate the process.&lt;/p&gt;
&lt;p&gt;The first iteration was me playing around with &lt;a href=&quot;https://github.com/nojaf/OwinChristmasPresents&quot;&gt;Owin/Katana&lt;/a&gt; and the second with &lt;a href=&quot;https://github.com/nojaf/christmas-redux&quot;&gt;React/Redux&lt;/a&gt;.&lt;br&gt;
This year I decide to go with Elm.&lt;/p&gt;
&lt;p&gt;I assume you know a thing or two about Elm as I’m not really explaining every single detail.&lt;br&gt;
This blogpost is merely a walkthrough of a little Elm application I wrote.&lt;/p&gt;
&lt;h3&gt;Getting started&lt;/h3&gt;
&lt;p&gt;I used &lt;a href=&quot;https://github.com/moarwick/elm-webpack-starter&quot;&gt;elm-webpack-starter&lt;/a&gt; to get started because I would also play around with &lt;a href=&quot;http://bulma.io/&quot;&gt;Bulma&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I populated the Main.elm file with&lt;/p&gt;
&lt;p&gt;And filled in all the pieces.&lt;/p&gt;
&lt;h3&gt;The model&lt;/h3&gt;
&lt;p&gt;The model part is very easy. There is a list of Person, a result dictionary and String property to contain the name of a new Person.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;elm&quot;&gt;&lt;pre class=&quot;language-elm&quot;&gt;&lt;code class=&quot;language-elm&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Dict&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;newPerson&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;init&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Cmd&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;init&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Dict.empty&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Cmd.none&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Actions&lt;/h3&gt;
&lt;p&gt;Very few messages but there is a bit of a twist in determining the result dictionary.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;elm&quot;&gt;&lt;pre class=&quot;language-elm&quot;&gt;&lt;code class=&quot;language-elm&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;UpdateNewPerson&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;String&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;AddPerson&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;RemovePerson&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Generate&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;View&lt;/h3&gt;
&lt;p&gt;Very standard Elm stuff here as well.&lt;br&gt;
I’m listing the code below to get the complete picture but notice that not much in going on.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;elm&quot;&gt;&lt;pre class=&quot;language-elm&quot;&gt;&lt;code class=&quot;language-elm&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Html&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token hvariable&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;createForm&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;newPerson&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;createPeopleTable&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;createGenerateButton&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;createResultTable&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;createForm&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Html&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;createForm&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;currentName&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token hvariable&quot;&gt;Html.form&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;entry box&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;onSubmit&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;AddPerson&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;h4&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;subtitle&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Personen toevoegen&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;control has-addons&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;input&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;input&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;type_&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;placeholder&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Vul een nieuwe naam in&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;onInput&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;UpdateNewPerson&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;currentName&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;formButtonClass&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;currentName&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;onClick&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;AddPerson&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Toevoegen&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;formButtonClass&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;String&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;formButtonClass&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;currentName&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;String.isEmpty&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;currentName&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;button is-info is-disabled&quot;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&quot;button is-info&quot;&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;createPeopleTable&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Html&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;createPeopleTable&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token hvariable&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;table is-striped&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;thead&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Naam&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;colspan&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Verwijderen&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;tbody&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;List.map&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;createPeopleTableRow&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;createPeopleTableRow&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Html&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;createPeopleTableRow&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;person&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token hvariable&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;is-icon&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;div&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;button is-danger is-small&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;onClick&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;RemovePerson&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;person&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;i&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fa fa-times&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;createGenerateButton&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Html&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;createGenerateButton&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;disabledClass&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;List.length&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;is-disabled&quot;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
                &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;button&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;button is-primary is-large &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;disabledClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;onClick&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Generate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;generate&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Genereer&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;createResultTable&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Html&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;createResultTable&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;resultList&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;Dict.toList&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;result&lt;/span&gt;

        &lt;span class=&quot;token hvariable&quot;&gt;createRow&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;createResultRow&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;table&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;table is-striped&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;thead&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Resultaat&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;th&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                    &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;tbody&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;resultList&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;List.map&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;createRow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;createResultRow&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Html&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;createResultRow&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;subject&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;getNameById&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;

        &lt;span class=&quot;token hvariable&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;getNameById&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;for&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;tr&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;subject&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;koopt voor&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;td&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;text&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;target&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;getNameById&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;String&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;getNameById&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token hvariable&quot;&gt;List.filter&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;\&lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;List.head&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Maybe.map&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;\&lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Maybe.withDefault&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;???&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I created some functions to split everything up, used some Bulma classes and Bob’s your uncle&lt;/p&gt;
&lt;h2&gt;Update&lt;/h2&gt;
&lt;p&gt;This is the part where it got a bit tricky.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;elm&quot;&gt;&lt;pre class=&quot;language-elm&quot;&gt;&lt;code class=&quot;language-elm&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Cmd&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt;
        &lt;span class=&quot;token constant&quot;&gt;UpdateNewPerson&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;newValue&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;newPerson&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;newValue&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Cmd.none&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token constant&quot;&gt;AddPerson&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;addPerson&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;

        &lt;span class=&quot;token constant&quot;&gt;RemovePerson&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;removePerson&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;

        &lt;span class=&quot;token constant&quot;&gt;Generate&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;generate&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;ids&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;processResult&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;ids&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;removePerson&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Cmd&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;removePerson&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;nextModel&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;List.filter&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;\&lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;List.length&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;nextModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;then&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;nextModel&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;generate&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;nextModel&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;nextModel&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Dict.empty&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Cmd.none&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;addPerson&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Cmd&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;addPerson&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;nextId&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;List.map&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;\&lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;List.maximum&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Maybe.withDefault&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;
                &lt;span class=&quot;token operator&quot;&gt;|&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;

        &lt;span class=&quot;token hvariable&quot;&gt;nextPerson&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token constant&quot;&gt;Person&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;newPerson&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;nextId&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;nextPerson&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;::&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;newPerson&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Cmd.none&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;processResult&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Cmd&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;processResult&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;ids&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;personIds&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;List.map&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;\&lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;

        &lt;span class=&quot;token hvariable&quot;&gt;merged&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;List.map2&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;personIds&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;ids&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Dict.fromList&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;merged&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Cmd.none&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;UpdateNewPerson&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;AddPerson&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;RemovePerson&lt;/code&gt; are straightforward but I scratched my head to generate the actual result. I couldn’t figure out how to get a randomized list of the person ids to populate the result dictionary.&lt;/p&gt;
&lt;h2&gt;Generating the result&lt;/h2&gt;
&lt;h3&gt;Problem&lt;/h3&gt;
&lt;p&gt;To determine the result of who buys for who I would basically take the list of ids and shuffle it until no indexes are the same. But such a function would not be a pure one as the outcome could be different each time you call it.&lt;/p&gt;
&lt;h3&gt;Solution&lt;/h3&gt;
&lt;p&gt;When I doubt stick to what you know! So I decide to tackle the problem in JavaScript using Elm’s port system.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;elm&quot;&gt;&lt;pre class=&quot;language-elm&quot;&gt;&lt;code class=&quot;language-elm&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;port&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;generationRequest&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Cmd&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;msg&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;generate&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Cmd&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;generate&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token hvariable&quot;&gt;generationRequest&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;List.map&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;\&lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note that &lt;code class=&quot;language-text&quot;&gt;generate&lt;/code&gt; is being called when a &lt;code class=&quot;language-text&quot;&gt;Generate&lt;/code&gt; message enters the update function by the onClick event. The &lt;code class=&quot;language-text&quot;&gt;generationRequest&lt;/code&gt; command return from the update function can be captured in the JavaScript world and will contain an array of ids when called.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// pull in desired CSS/SASS files&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./styles/main.scss&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// inject bundled Elm app into div#main&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; Elm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;../elm/Main&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Elm&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Main&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;embed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;main&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ports&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;generationRequest&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;subscribe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;ids&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
    app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ports&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;generationResponse&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;send&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ids&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; currentIndex &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; temporaryValue&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; randomIndex &lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// While there remain elements to shuffle...&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; currentIndex&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// Pick a remaining element...&lt;/span&gt;
        randomIndex &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;floor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Math&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;random&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; currentIndex&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        currentIndex &lt;span class=&quot;token operator&quot;&gt;-=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// And swap it with the current element.&lt;/span&gt;
        temporaryValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;currentIndex&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        array&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;currentIndex&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;randomIndex&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        array&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;randomIndex&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; temporaryValue&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; array&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;persons&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; result &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;shuffle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;persons&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; duplicates &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;some&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; index&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
       &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; persons&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;index&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; duplicates &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;persons&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Inside the subscribe function I call the &lt;code class=&quot;language-text&quot;&gt;generationResponse&lt;/code&gt; port in Elm to return the result.&lt;br&gt;
In order to capture the result I need a subscription in Elm.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;elm&quot;&gt;&lt;pre class=&quot;language-elm&quot;&gt;&lt;code class=&quot;language-elm&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;port&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;generationResponse&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;msg&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;subscriptions&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Sub&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;subscriptions&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token hvariable&quot;&gt;generationResponse&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Result&lt;/span&gt;

&lt;span class=&quot;token hvariable&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Program&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Never&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt;  
&lt;span class=&quot;token hvariable&quot;&gt;main&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token hvariable&quot;&gt;program&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;init&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;init&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;view&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;view&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;update&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;update&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;subscriptions&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;subscriptions&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So the port gets called, the subscription message will find its way into the update function (into &lt;code class=&quot;language-text&quot;&gt;processResult&lt;/code&gt;) and the result can used to populate the dictionary.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;elm&quot;&gt;&lt;pre class=&quot;language-elm&quot;&gt;&lt;code class=&quot;language-elm&quot;&gt;&lt;span class=&quot;token hvariable&quot;&gt;processResult&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;List&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Int&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Cmd&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;Msg&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token hvariable&quot;&gt;processResult&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;ids&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt;
        &lt;span class=&quot;token hvariable&quot;&gt;personIds&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;List.map&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;\&lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token hvariable&quot;&gt;people&lt;/span&gt;

        &lt;span class=&quot;token hvariable&quot;&gt;merged&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
            &lt;span class=&quot;token hvariable&quot;&gt;List.map2&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;personIds&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;ids&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;model&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Dict.fromList&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;merged&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token hvariable&quot;&gt;Cmd.none&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;The Source&lt;/h2&gt;
&lt;p&gt;Is on my &lt;a href=&quot;https://github.com/nojaf/christmas-elm&quot;&gt;github&lt;/a&gt; or you can view the result on &lt;a href=&quot;https://nojaf.github.io/christmas-elm/&quot;&gt;https://nojaf.github.io/christmas-elm/&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Remarks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Comparing to my &lt;a href=&quot;https://github.com/nojaf/christmas-redux&quot;&gt;React/Redux example&lt;/a&gt; I enjoyed Elm a lot more. Mainly because there is so much goodness just out of the box where with JavaScript you need to set it up yourselves. I’m talking about the frameworks here &lt;em&gt;(Redux/ImmutableJS/React/DevTools)&lt;/em&gt;, a lot of these solutions are included in the Elm language/architecture.&lt;/li&gt;
&lt;li&gt;I didn’t write any tests and I actually feel ok with this. The Elm compiler is so brilliant that I trust the output once it gets compiled.&lt;/li&gt;
&lt;li&gt;Elm really deserves a lot more attention. Too many developers are hyped with Angular2/TypeScript, Vuejs, React/Flow and others. Nothing wrong with these great frameworks, I merely encourage everyone to try out Elm as it changed the way I look at the JavaScript landscape.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;I hope you enjoyed this blogpost and it all makes sense. If you have any suggestions or questions please leave a comment.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Running Laravel projects on Windows 10 using Docker]]></title><description><![CDATA[Introduction Nowadays I’m into PHP & Docker. Yep that’s right this .NET boy is going wild! As I’m learning all these new concepts it became…]]></description><link>https://blog.nojaf.com/laradock-windows-10/</link><guid isPermaLink="false">https://blog.nojaf.com/laradock-windows-10/</guid><pubDate>Fri, 19 Aug 2016 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Nowadays I’m into PHP &amp;#x26; Docker. Yep that’s right this .NET boy is going wild!&lt;/p&gt;
&lt;p&gt;As I’m learning all these new concepts it became clear that you don’t really start from scratch with PHP but you choose a framework.&lt;/p&gt;
&lt;p&gt;I ended up choosing Laravel because it is popular, has a beautiful website and there is this thing called &lt;a href=&quot;https://laracasts.com/&quot;&gt;Laracasts&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Laracasts - It’s Kinda Like Netflix for Your Career!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;Basic Task List&lt;/h3&gt;
&lt;p&gt;In this blogpost we’re going to create the &lt;a href=&quot;https://laravel.com/docs/5.2/quickstart&quot;&gt;Basic Task List&lt;/a&gt; example from the Laravel documentation using &lt;a href=&quot;https://github.com/LaraDock/laradock&quot;&gt;LaraDock&lt;/a&gt; instead of &lt;a href=&quot;https://laravel.com/docs/5.2/homestead&quot;&gt;Homestead&lt;/a&gt; on Vagrant.&lt;/p&gt;
&lt;p&gt;To get started I assume:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;you have installed Docker&lt;/li&gt;
&lt;li&gt;you have a general idea what Docker is and how it works&lt;/li&gt;
&lt;li&gt;you’re on Windows just like me.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Getting started&lt;/h2&gt;
&lt;p&gt;Open a PowerShell window and create a new project folder.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PS MyUser\Projects&amp;gt;mkdir laravel-basic-task-list&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;em&gt;ProTip: start using [Terminal Wings](&lt;a href=&quot;https://www.phrozensoft.com/2016/02/terminal&quot;&gt;https://www.phrozensoft.com/2016/02/terminal&lt;/a&gt;&lt;/em&gt;wings-12), it’s super fancy_&lt;/p&gt;
&lt;p&gt;Enter the newly created folder&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PS MyUser\Projects&amp;gt;cd laravel-basic-task-list
PS MyUser\Projects\laravel-basic-task-list&amp;gt;git init&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Add LaraDock as a &lt;a href=&quot;https://git-scm.com/docs/git-submodule&quot;&gt;git-submodule&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PS MyUser\Projects\laravel-basic-task-list&amp;gt;git submodule add https://github.com/LaraDock/laradock.git laradock&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We’ll make some slight changes to the &lt;code class=&quot;language-text&quot;&gt;laradock\docker-compose.yaml&lt;/code&gt; file:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Change the Nginx port forwarding from &lt;code class=&quot;language-text&quot;&gt;80:80&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;8300:80&lt;/code&gt; to avoid any possible collisions with IIS.&lt;/li&gt;
&lt;li&gt;Change the volumes mapping in the &lt;em&gt;Laravel Application Code Container&lt;/em&gt; from &lt;code class=&quot;language-text&quot;&gt;../:/var/www/laravel&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;../laravel/:/var/www/laravel&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;We basically want the following in our project folder:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt; laravel-basic-task-list&amp;gt;
     laradock ~&amp;gt; git submodule
     laravel ~&amp;gt; our laravel installation folder&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We didn’t install anything yet so let’s just create an empty &lt;code class=&quot;language-text&quot;&gt;laravel&lt;/code&gt; folder:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PS MyUser\Projects\laravel-basic-task-list&amp;gt;mkdir laravel&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Firing up Docker&lt;/h2&gt;
&lt;p&gt;For the tutorial we need to list two containers: &lt;strong&gt;nginx&lt;/strong&gt; and &lt;strong&gt;mysql&lt;/strong&gt;.&lt;br&gt;
Let’s move back to the laradock folder (since our docker-compose file is there) and create our containers:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PS MyUser\Projects\laravel-basic-task-list\laradock&amp;gt;docker-compose up -d nginx mysql&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will create all the necessary container and run three containers in the background.&lt;br&gt;
These being nginx, mysql and the workspace container.&lt;br&gt;
Verify this by using &lt;em&gt;docker-compose ps&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PS MyUser\Projects\laravel-basic-task-list\laradock&amp;gt;docker-compose ps
Name                        Command             State                      Ports
------------------------------------------------------------------------------------------------
laradock_mysql_1            docker-entrypoint.sh mysqld   Up       0.0.0.0:3306-&amp;gt;3306/tcp
laradock_nginx_1            nginx                         Up       0.0.0.0:443-&amp;gt;443/tcp, 0.0.0.0:8300-&amp;gt;80/tcp
laradock_php-fpm_1          php-fpm                       Up       9000/tcp
laradock_volumes_data_1     true                          Exit 0
laradock_volumes_source_1   true                          Exit 0
laradock_workspace_1        /sbin/my_init                 Up&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So far so good. If you now browse to &lt;a href=&quot;http://localhost:8300&quot;&gt;http://localhost:8300&lt;/a&gt; you should get a 404 page by Nginx.&lt;br&gt;
This is expected since we didn’t install anything yet.&lt;/p&gt;
&lt;h2&gt;Taking control&lt;/h2&gt;
&lt;p&gt;Ok, now let’s install Laravel using our workspace container.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Enter the Workspace container, to execute commands like (Artisan, Composer, PHPUnit, Gulp, …).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;PS MyUser\Projects\laravel-basic-task-list\laradock&amp;gt;docker exec -it laradock_workspace_1 bash&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we can run bash commands inside the workspace container. We’ll use Composer to create our new Laravel project.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;root@81acfe2e1e76:/var/www/laravel# composer create-project laravel/laravel .&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will install Laravel inside our laravel folder.&lt;br&gt;
Open up the project folder in a text editor. It should look somewhat like this:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 344px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3999ca3ce4427f46f77241bcfae4e85a/5f1e4/file-structure.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 243.3139534883721%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAxCAIAAABVih7fAAAACXBIWXMAABJ0AAASdAHeZh94AAADiklEQVRIx5VW227bOBDt/39MXpx9CdKH7lOQIFi0tWMrsiRKlCiRFHW/yy72UOruNovGoQeQJcMenbmcOcNPjEX7/WG32+4PVtv142Bqfd9/apqGC5GmaVmW+N79Y/pxuS45V1X1/fvWtl9ZElMaBJR5HmFR5BMX3ziX4zi+64wbwMPFmqYuFtOgi30Q9vr0/Pz8x+0tgieB71Patt17gL9BpmEYRVFZFlmW1XXzoed/zm3b2rZ9PB6rqkTwRVmZOuPCX0+nk+s6X778CeRUpetvRsgw+FNKn56elFJZnuNd4ziZOuNpv9/f399LKaIw9H2S8ORy8G+QkyR5eXmp6yrPc3QLxbsCebvd3m42WaZcx0HPELlpn6dpEkJYltU2DTBXql6BvNvtNpsNi5jruscFHG+88Io3OTPGEDlGAtXuu96UYash5ru7uyRmvu+XZTXNs2nOwPE87/HxsVoYKqUE/mDYKhgAHx4eUG0hUTsBsozmzgj78+d7ODMWw67LeS0YtEGlSgh5Ratg8ESrwEpIyjRPpiO5GvJ0HAfIRQ4laa9z/vb1683NjUpT38NUiMEw535pVV3XccI18sJNUw3DDUyEj+sHmC0h5fnHeZ5P8zybkgTI8MQwInme8DiJueBGYU/jWFS1yxJoEEfBWRxGIfptgtwP4zSWxQ9nh5gxz8T3IMHAv0CVX6o9jn1TDyEBKwXnUDIEL1Np4IyqTtNQZPP+L8Y5RJh4JBZcF8xknlfkLg4xUiAZlKAoiytaBcl9OXosDO3DQSp1Pp91zEY5D6Pepy04UmUqQ8/ROSgZlpaR8zi081Cg1Z6D5XF0feJ5rlKFxv9d/P8jSZNwiXWVyhTVzoscwV9Yev/mrKU3Bz2jKFMp9anes5BRQlCIaRr7y8gaumkm54juBmHgh1RvrPlkTpKms+04TkKQkyeZxjTRbWzZaWqzrLAOjJKA4DxCiB9QGo5GYrAi60phNDAbHCSHpAyGzkNbzSrAmeTVtfFJiSNViojeY+ibVnU4CslYH0vyDA2rwJCmNaPnPGepeN0+It2DdQBJHL3rsgs1+xV5aJtOihIno3oxQBttjBW5qAfHElFEPSyegNiu3X08Vesw52qiTpovGsAljzl2rQHyT+1UZ8+iUC1s95AFhBqFvfjOkrNX6xvBIJHAdo6MhTgJm4i+PgRUZS5iqpcr9FYrCfZz+aHz3yey5PGG0gQQAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;file structure&quot;
        title=&quot;file structure&quot;
        src=&quot;/static/3999ca3ce4427f46f77241bcfae4e85a/5f1e4/file-structure.png&quot;
        srcset=&quot;/static/3999ca3ce4427f46f77241bcfae4e85a/00d96/file-structure.png 148w,
/static/3999ca3ce4427f46f77241bcfae4e85a/0b23c/file-structure.png 295w,
/static/3999ca3ce4427f46f77241bcfae4e85a/5f1e4/file-structure.png 344w&quot;
        sizes=&quot;(max-width: 344px) 100vw, 344px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Browsing to &lt;a href=&quot;http://localhost:8300&quot;&gt;http://localhost:8300&lt;/a&gt; should return the Laravel welcome page.&lt;/p&gt;
&lt;h2&gt;Wiring up the database&lt;/h2&gt;
&lt;p&gt;Open the &lt;em&gt;.env&lt;/em&gt; file. We need to tell Laravel that we are using the mysql container as MySql server.&lt;br&gt;
So change &lt;code class=&quot;language-text&quot;&gt;DB_HOST=localhost&lt;/code&gt; to &lt;code class=&quot;language-text&quot;&gt;DB_HOST=mysql&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We can quickly check if this all works by running the default migrations&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;root@81acfe2e1e76:/var/www/laravel# php artisan migrate&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;At this point we are good to go to follow along the &lt;a href=&quot;https://laravel.com/docs/5.2/quickstart#prepping-the-database&quot;&gt;tutorial&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Connecting to the database&lt;/h2&gt;
&lt;p&gt;Assuming we completed the exercise, let’s take a look at our tasks table in the database.&lt;br&gt;
Exit the workspace container and enter the mysql container&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;root@81acfe2e1e76:/var/www/laravel# exit
PS MyUser\Projects\laravel-basic-task-list\laradock&amp;gt;docker exec -it laradock_mysql_1 bash
root@ebc73025ab6f:/# mysql --user=homestead --password=secret homestead&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To view our tables:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt; mysql&amp;gt; show tables;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(mind the &lt;strong&gt;;&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;Our tasks:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;mysql&amp;gt; select * from tasks;
+----+---------+---------------------+---------------------+
| id | name    | created_at          | updated_at          |
+----+---------+---------------------+---------------------+
|  2 | test    | 2016-08-15 19:23:07 | 2016-08-15 19:23:07 |
|  4 | foobar  | 2016-08-15 19:23:15 | 2016-08-15 19:23:15 |
|  5 | 2-tests | 2016-08-15 19:28:13 | 2016-08-15 19:28:13 |
|  6 | Foobar  | 2016-08-16 16:43:47 | 2016-08-16 16:43:47 |
+----+---------+---------------------+---------------------+&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Remarks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I’m using Docker 1.12.0 (stable) on the Windows 10 Anniversary Update&lt;/li&gt;
&lt;li&gt;I’m still learning Docker, PHP, Laravel, … so this is more &lt;em&gt;a&lt;/em&gt; guide not the &lt;em&gt;ultimate guide&lt;/em&gt;.&lt;/li&gt;
&lt;li&gt;I really, really like the fact that I didn’t have to install anything to get Laravel up and running&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;I hope you enjoyed this blogpost and it all makes sense. If you have any suggestions or questions please leave a comment.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;</content:encoded></item><item><title><![CDATA[A leap in RxJS]]></title><description><![CDATA[Introduction A while ago I wrote some JavaScript to create a custom slideshow. I recently had to revisit that project and I saw an…]]></description><link>https://blog.nojaf.com/leap-rxjs/</link><guid isPermaLink="false">https://blog.nojaf.com/leap-rxjs/</guid><pubDate>Thu, 24 Mar 2016 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;A while ago I wrote some JavaScript to create a custom slideshow. I recently had to revisit that project and I saw an opportunity to fiddle around with &lt;a href=&quot;https://github.com/Reactive-Extensions/RxJS&quot;&gt;RxJS&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Explaining the problem&lt;/h2&gt;
&lt;p&gt;The way the slideshow works is that it shows three images and moves up one frame at a time.&lt;br&gt;
So initially the first three images are shown and the rest are hidden.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/09b2882a3ce0ec9b0b5802a3089f867d/22cd6/nojaf-slideshow-example.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 28.335301062573787%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdElEQVQY002Ry0rCURCHz3u4cOvCQHsMhaTQbuBCUMGd6cadi3yGatfFLnZ1W1maEWWllmbRBdpEFkVXMzWrr3P+KDQwDDNz5mN+c0T964dKtU5NxvL9IyOjY8TmF1leiTMXW2B8YpKp6DRLy3FSW9ucX1xSKJbY29unfPdArfHNx2eDz3oTiUDcSUi19kVTJoXiKSaTCZfLRTy+QjQapae7G4fdjtPpJBKJEA6HGRwYwNbVRXp7BzmmAZ9e3ri8ukbMzMZQ1mj+kj8+wWAwYLFYCAQCuN0egsEgNpsNh8PBcAvo8/mwWq0kU2m+f9GW2dnN0NvXj3j/qGmSVSObL6DX69HpdAghMJs78Xg8eL1eCXfjHxoiFArh9/vpMBpJbCS1ZSotxvNrBaHktm+gCuvy0epagrXEJgfZPPuHOel5iqUz7STZ3BG7mQM2k2lubu9Rf6DmFUcxRDtpQ/+buk9V1irVBu9yAyVNKflp9f/DVFT+BxnXgVGO77YOAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;slideshow example&quot;
        title=&quot;slideshow example&quot;
        src=&quot;/static/09b2882a3ce0ec9b0b5802a3089f867d/799d3/nojaf-slideshow-example.png&quot;
        srcset=&quot;/static/09b2882a3ce0ec9b0b5802a3089f867d/00d96/nojaf-slideshow-example.png 148w,
/static/09b2882a3ce0ec9b0b5802a3089f867d/0b23c/nojaf-slideshow-example.png 295w,
/static/09b2882a3ce0ec9b0b5802a3089f867d/799d3/nojaf-slideshow-example.png 590w,
/static/09b2882a3ce0ec9b0b5802a3089f867d/22cd6/nojaf-slideshow-example.png 847w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;You press the right button to move forward and the left to move backwards. Of course at the beginning of the slideshow you can’t move backwards. Thus the left button is hidden. Once you are at the end of the slideshow you don’t see the right button anymore.&lt;/p&gt;
&lt;h2&gt;The initial approach&lt;/h2&gt;
&lt;p&gt;We keep track of the current index (starting at zero). When one of the buttons is clicked, we update the index, validate whether the index is still in range, show the correct images and update the buttons.&lt;/p&gt;
&lt;p&gt;It looked like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; maxLength &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;initCategory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        maxLength &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.project-category&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#right-arrow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            index&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;index &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; maxLength &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; maxLength &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;changeImages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;showArrows&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#left-arrow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            index&lt;span class=&quot;token operator&quot;&gt;--&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;index &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;changeImages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;showArrows&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;changeImages&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.project-category&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;removeClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;active&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.project-category&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;index&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;active&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.project-category&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;index &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;active&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.project-category&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;index &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addClass&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;active&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;showArrows&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#left-arrow,#right-arrow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;hide&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;index &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#left-arrow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;index &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; maxLength &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#right-arrow&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;show&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onload &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; initCategory&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;The downside&lt;/h3&gt;
&lt;p&gt;The index was somewhat a global variable, &lt;em&gt;ok all the code was in a closure but all of the code depends on a single variable.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;I had two click handlers that were way too similar.&lt;/p&gt;
&lt;h2&gt;A new requirement&lt;/h2&gt;
&lt;p&gt;In order to improve the user experience I wanted the slideshow to work with the arrow keys as well.&lt;/p&gt;
&lt;p&gt;You guessed it, it led to another event handler (keyup) that modified the index variable and called the &lt;code class=&quot;language-text&quot;&gt;changeImages&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;showArrows&lt;/code&gt; function. It was slowly becoming a mess.&lt;/p&gt;
&lt;h2&gt;Enter RxJS&lt;/h2&gt;
&lt;p&gt;When I needed to add support for the arrow keys it started to become clear that we are only interested in the changes to the index. Each change is an event (click or keyup) that either goes forward or backwards. The sum of all the changes is the current state of the index.&lt;/p&gt;
&lt;p&gt;So what if we could map every click on the left button to -1 and every click on the right to +1?&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; leftArrow &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.left&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rightArrow &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.right&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; rightClickSource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Rx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Observable  
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rightArrow&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;click&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; leftClickSource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Rx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Observable  
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;leftArrow&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;click&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And each time an arrow key is pressed, we’d like to keep track of that too.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; arrowKeysSource &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Rx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Observable  
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fromEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;document&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;keyup&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;keyCode &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;37&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;keyCode &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;39&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;keyCode &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;39&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Rx Marbles&lt;/h3&gt;
&lt;p&gt;One very helpful site to wrap your head around all the RxJS functions is &lt;a href=&quot;http://rxmarbles.com/&quot;&gt;RxMarbles&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To determine the value of my index I need to do a &lt;strong&gt;merge&lt;/strong&gt; and a &lt;strong&gt;scan&lt;/strong&gt; on my sources.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d4c6a4e1b360ecf7f6e87bf38c27f7cc/c87be/merge.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.19105199516324%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdklEQVQoz5VSa08bMRC8//+P+NBWQmoRBQFqKREQkuaSHo2Pq30Xv1/D2lAEiAp1pdFY9u5od9ZNDAlsWkOaCd4oSL5GSBmyW8MrCaEMfg0CKUb8FitoqxBCgPf+BYwxlZvkgbP1J3S8hRZbsJuPsBHYHhCzW9wwjv3ZEomSvy72MIxbOOOgtILW+gnDMEBKSYKJqv8R+T/vSzTWuqosaTylFFQ5E7QP6L98AJ/PIF3ANE1IzuDzVYuj+QbRWezkQ03J7/u+5jRl7kj+vIVgDSK9l45yzkgpwToPS3fpdS75WrgKvhzkkfMDl3fGWEUIHu9FUwwtGilmhJhAC66FxdmC0pUjOzjnyH/tzumpo8IFJa92GFzCrDvEVnTQY4++PaSREu7OT8CP9rG8nuO0ZUhUdNkd4HixwFU3IJCH6tmWhRDVTxKMWLJzDLseevcH/PY7Cca6jOnHCTarFhfdHby1+Mm+4WKzwYqJKqjp75lHjONYBe8BWLG2zLUdq18AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;merge&quot;
        title=&quot;merge&quot;
        src=&quot;/static/d4c6a4e1b360ecf7f6e87bf38c27f7cc/799d3/merge.png&quot;
        srcset=&quot;/static/d4c6a4e1b360ecf7f6e87bf38c27f7cc/00d96/merge.png 148w,
/static/d4c6a4e1b360ecf7f6e87bf38c27f7cc/0b23c/merge.png 295w,
/static/d4c6a4e1b360ecf7f6e87bf38c27f7cc/799d3/merge.png 590w,
/static/d4c6a4e1b360ecf7f6e87bf38c27f7cc/c87be/merge.png 827w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9f45856ce47788a348bd20253f532b44/2cc4f/scan.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 34.74576271186441%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABJ0lEQVQoz2VRy07DMBDM//8OFwRIhUNB3OBWEKigiubpxHH8jpPBa9KqpZbGG8/OesebzDkH5z1MlUMMA0quwFWNXrUwooS1OuWTLkKVezhjzjiCiZy1FlkSaYN+fYPv3Q6rTYG34hHv5SvE1z1EX0WxhdYaOhbVD9eQLYO2C7eg6zr0fY/Mx060Jlyu+fR7nmn7x13WJId/N06paI6xbVvkRYGmrqCUghDi6EQpmZ7GOUcI4djsgIxE5NLFgx8D3DQjeAfvLIybYJf5HGYV/ByjP3JUe4qMug1SolnfgX1sIJ5XePr8wcs2B9/egnfk0kBGjZIq5q7AeAWduCHxBMZYmmNGtsmqbUqMasDY1mDSxD9t47lAGH3KT8tIGrnHGM45inQP4RepUB0MhEyt3wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;scan&quot;
        title=&quot;scan&quot;
        src=&quot;/static/9f45856ce47788a348bd20253f532b44/799d3/scan.png&quot;
        srcset=&quot;/static/9f45856ce47788a348bd20253f532b44/00d96/scan.png 148w,
/static/9f45856ce47788a348bd20253f532b44/0b23c/scan.png 295w,
/static/9f45856ce47788a348bd20253f532b44/799d3/scan.png 590w,
/static/9f45856ce47788a348bd20253f532b44/2cc4f/scan.png 826w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; source &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Rx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Observable  
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;merge&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rightClickSource&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; leftClickSource&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arrowKeysSource&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;acc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; currentValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; acc &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; currentValue&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    nextValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextValue &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; maxLength &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; nextValue &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; maxLength &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    nextValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nextValue &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; nextValue &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; nextValue&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;startWith&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Notice that I do some validation in my scan callback.&lt;/p&gt;
&lt;h3&gt;Subscribe!&lt;/h3&gt;
&lt;p&gt;The missing piece of the puzzle is now to trigger the &lt;code class=&quot;language-text&quot;&gt;changeImages&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;showArrows&lt;/code&gt; functions. We can do this by &lt;em&gt;subscribing&lt;/em&gt; to &lt;code class=&quot;language-text&quot;&gt;source&lt;/code&gt; observable.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;source.subscribe((next) =&amp;gt; {  
  changeImages(next);
  showArrows(next);
});&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;The Source&lt;/h2&gt;
&lt;p&gt;I’ve created a &lt;a href=&quot;https://jsfiddle.net/46am0wmf/14/&quot;&gt;jsfiddle&lt;/a&gt; with the result.&lt;/p&gt;
&lt;h2&gt;Remarks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;I really learned a lot by this little experiment and I encourage you to definitely check out RxJS&lt;/li&gt;
&lt;li&gt;The final example doesn’t use jQuery and is written with Babel.&lt;/li&gt;
&lt;li&gt;Please correct me if you find any mistakes.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;RxJS rocks! If you have any suggestions or questions please leave a comment.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Redux Thunk, javascript middleware for Redux]]></title><description><![CDATA[Introduction Lately I’ve been using a lot of Reactjs goodness in my side projects. React is only the V in a modern day MVW (Model, View…]]></description><link>https://blog.nojaf.com/redux-thunk/</link><guid isPermaLink="false">https://blog.nojaf.com/redux-thunk/</guid><pubDate>Sun, 06 Dec 2015 00:00:00 GMT</pubDate><content:encoded>&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Lately I’ve been using a lot of Reactjs goodness in my side projects. React is only the V in a modern day MVW (Model, View Whatever) pattern and that’s an interesting subject. Facebook uses its own &lt;a href=&quot;https://facebook.github.io/flux/&quot;&gt;Flux&lt;/a&gt; library/pattern/architecture to cope with the other stuff, however there seem to be a lot of different opinions when it’s comes to flux.&lt;/p&gt;
&lt;p&gt;One of those flux variants is Redux, created by Dan Abramov and others. If you never heard of Redux or don’t really know how it works, I suggest you &lt;a href=&quot;https://egghead.io/series/getting-started-with-redux&quot;&gt;watch these videos first&lt;/a&gt;. In this blogpost I’ll explain a way of dealing with async operations using &lt;a href=&quot;https://github.com/gaearon/redux-thunk&quot;&gt;Redux Thunk&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Explaining the problem&lt;/h2&gt;
&lt;p&gt;The main reason why we can’t use async is due to the way a reducer function works. The concept of a reducer is that it takes the current state and an action and it returns the next state. It’s a pure function that does not modify the current state.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;myReducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;previousState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; someAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; nextState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        foo&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;previousState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;foo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        bar&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;someAction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bar
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If would we want to do some async stuff we would have to wait until a Promise is resolved and then return the next state. We could just return the previous state and dispatch a new action once our Promise is resolved.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;myReducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;previousState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; someAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
    &lt;span class=&quot;token function&quot;&gt;someAsyncMethod&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;someAction&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bar&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            myStore&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;SOME_TYPE&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; bar&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; previousState&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a bad approach because we can have side effects here.&lt;br&gt;
The function is no longer pure. &lt;em&gt;What if the Promise is rejected?&lt;/em&gt;&lt;br&gt;
It’s also not allowed by the Redux store if you look at the &lt;a href=&quot;https://github.com/rackt/redux/blob/master/src/createStore.js#L116&quot;&gt;source code&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Enter middleware&lt;/h2&gt;
&lt;p&gt;Middleware is magical concept created by ancient elves riding unicorns. No not really, although I have to admit that it does seem a bit overwhelming at first. The essence of middleware is that it runs in the Store before the action is dispatched to the reducer. You can read &lt;a href=&quot;http://redux.js.org/docs/advanced/Middleware.html&quot;&gt;the docs&lt;/a&gt; for the long version.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It provides a third-party extension point between dispatching an action, and the moment it reaches the reducer.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Redux docs&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The Thunk middleware looks like this&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;thunkMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; dispatch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getState &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;next&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token parameter&quot;&gt;action&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; action &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Although this is a bit hard to read, let me put that in ES5 for a moment&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;thunkMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; action &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;function&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So next is actually the next piece of middleware. The last piece of middleware should call &lt;em&gt;next&lt;/em&gt; otherwise the action never gets dispatched to the root reducer. &lt;a href=&quot;https://jsfiddle.net/6Lwte98g/&quot;&gt;Example&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So basically the Thunk middleware stops the chain when the action is a function.&lt;br&gt;
In the source of Thunk, the outcome of the action function gets returned but the value is most likely to be a Promise so I don’t think that it is necessary to return the value of &lt;code class=&quot;language-text&quot;&gt;action(store.dispatch, store.getState)&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;A full example&lt;/h2&gt;
&lt;p&gt;Enough with the theory, let’s create an actual example.&lt;br&gt;
We’ll create a little app that fetches github repositories from a user.&lt;/p&gt;
&lt;h3&gt;The application state&lt;/h3&gt;
&lt;p&gt;When creating a Redux application I always find it helpful to have an idea of the application state. We need to store the username, the repositories and a flag whether we are loading the repos or not.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;user&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;nojaf&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;repos&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;isLoading&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Actions and Action creators&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addReposAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;jsonResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ADD_TWEETS&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    repos&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; jsonResult
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;userChangedAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;USER_CHANGED&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    value&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; value
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;loadingChangedAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;isLoading&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    type&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;IS_LOADING&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    isLoading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; isLoading
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The first three action creators are easy to understand, they return an action, the end. As we saw in the code of Thunk the action can also be a function.&lt;br&gt;
So our action creator that eventually does some async code should return a function.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Wait, wait, wait. An action creator that returns a function??!?&lt;/strong&gt; How is that even an action creator? Well it isn’t really but it isn’t a reducer either, it’s a function that returns a function. So instead of debating on semantics let’s look at the code.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// returns a function and will be called in the Redux-Thunk middleware&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;loadReposAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://api.github.com/users/&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/repos&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadingChangedAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadingChangedAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;request failed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;jsonResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addReposAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jsonResult&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;sweetAlert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Oops...&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Couldn&apos;t fetch repos for user: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So the clue with the &lt;code class=&quot;language-text&quot;&gt;loadReposAction&lt;/code&gt; function is that we can do async stuff and then dispatch when we have something. Each dispatch call will run synchronously and update the application state. Whether we return the Promise of the fetch function doesn’t really matter.&lt;/p&gt;
&lt;h3&gt;The reducer&lt;/h3&gt;
&lt;p&gt;Nothing special here:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;initialState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    user&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    repos&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    isLoading&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;rootReducer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; previousState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;initialState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ADD_TWEETS&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;addTweets&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;USER_CHANGED&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;userChanged&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;IS_LOADING&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isLoadingChanged&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; previousState&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Wiring up the Store&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; createStoreWithMiddleware &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Redux&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;applyMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;thunkMiddleware&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Redux&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;createStore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; store &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createStoreWithMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rootReducer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Dispatching&lt;/h3&gt;
&lt;p&gt;So in order to bootstrap the application we’ll have to dispatch some actions to get things going.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;userChangedAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;nojaf&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  
&lt;span class=&quot;token comment&quot;&gt;// this will update the state to have a username&lt;/span&gt;
store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadReposAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
&lt;span class=&quot;token comment&quot;&gt;// Thunk will execute the return value of loadReposAction&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;To Thunk or not to Thunk?&lt;/h2&gt;
&lt;p&gt;So using the Thunk middleware we can execute async stuff. We briefly saw how middleware works and we most likely scratched our heads. Couldn’t we just call the &lt;code class=&quot;language-text&quot;&gt;loadReposAction&lt;/code&gt; directly and pass down the store?&lt;/p&gt;
&lt;p&gt;Something like:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;js&quot;&gt;&lt;pre class=&quot;language-js&quot;&gt;&lt;code class=&quot;language-js&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;loadReposAction2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;store&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;  
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://api.github.com/users/&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/repos&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadingChangedAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadingChangedAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; result&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;request failed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;jsonResult&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addReposAction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;jsonResult&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;sweetAlert&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Oops...&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;Couldn&apos;t fetch repos for user: &quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;error&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And just call &lt;code class=&quot;language-text&quot;&gt;loadReposAction2(myStore);&lt;/code&gt;???&lt;/p&gt;
&lt;p&gt;Well turns out we can and none of this was really necessary. It seems like a good idea to keep the flow consistent and use the dispatcher for all actions. In the end it’s personal choice I think.&lt;/p&gt;
&lt;h2&gt;The Source&lt;/h2&gt;
&lt;p&gt;I’ve created a &lt;a href=&quot;//jsfiddle.net/8y8e427g/13/&quot;&gt;jsfiddle&lt;/a&gt; with the result.&lt;/p&gt;
&lt;h2&gt;Remarks&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Writing this blogpost really taught me how to use Redux Thunk, once you get it, it’s actually quite easy.&lt;/li&gt;
&lt;li&gt;Middleware on the other hand can still be a bit confusing from time to time.&lt;/li&gt;
&lt;li&gt;Please correct me if you find any mistakes.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Final words&lt;/h2&gt;
&lt;p&gt;I hope you enjoyed this blogpost and it all makes sense. If you have any suggestions or questions please leave a comment.&lt;/p&gt;
&lt;p&gt;Yours truly,&lt;br&gt;
nojaf&lt;/p&gt;</content:encoded></item></channel></rss>