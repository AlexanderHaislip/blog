{"componentChunkName":"component---src-templates-blog-post-js","path":"/2016/08/19/laradock-on-windows-10/","result":{"data":{"site":{"siteMetadata":{"title":"blog.nojaf.com","author":"Florian Verdonck"}},"markdownRemark":{"id":"7a175b2f-3aff-5238-9132-4b5c0ace7168","excerpt":"Introduction Nowadays I’m into PHP & Docker. Yep that’s right this .NET boy is going wild! As I’m learning all these new concepts it became clear that you don’t…","html":"<h2>Introduction</h2>\n<p>Nowadays I’m into PHP &#x26; Docker. Yep that’s right this .NET boy is going wild!</p>\n<p>As I’m learning all these new concepts it became clear that you don’t really start from scratch with PHP but you choose a framework.</p>\n<p>I ended up choosing Laravel because it is popular, has a beautiful website and there is this thing called <a href=\"https://laracasts.com/\">Laracasts</a>.</p>\n<blockquote>\n<p>Laracasts - It’s Kinda Like Netflix for Your Career!</p>\n</blockquote>\n<h3>Basic Task List</h3>\n<p>In this blogpost we’re going to create the <a href=\"https://laravel.com/docs/5.2/quickstart\">Basic Task List</a> example from the Laravel documentation using <a href=\"https://github.com/LaraDock/laradock\">LaraDock</a> instead of <a href=\"https://laravel.com/docs/5.2/homestead\">Homestead</a> on Vagrant.</p>\n<p>To get started I assume:</p>\n<ul>\n<li>you have installed Docker</li>\n<li>you have a general idea what Docker is and how it works</li>\n<li>you’re on Windows just like me.</li>\n</ul>\n<h2>Getting started</h2>\n<p>Open a PowerShell window and create a new project folder.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PS MyUser\\Projects>mkdir laravel-basic-task-list</code></pre></div>\n<p><em>ProTip: start using [Terminal Wings](<a href=\"https://www.phrozensoft.com/2016/02/terminal\">https://www.phrozensoft.com/2016/02/terminal</a></em>wings-12), it’s super fancy_</p>\n<p>Enter the newly created folder</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PS MyUser\\Projects>cd laravel-basic-task-list\nPS MyUser\\Projects\\laravel-basic-task-list>git init</code></pre></div>\n<p>Add LaraDock as a <a href=\"https://git-scm.com/docs/git-submodule\">git-submodule</a></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PS MyUser\\Projects\\laravel-basic-task-list>git submodule add https://github.com/LaraDock/laradock.git laradock</code></pre></div>\n<p>We’ll make some slight changes to the <code class=\"language-text\">laradock\\docker-compose.yaml</code> file:</p>\n<ul>\n<li>Change the Nginx port forwarding from <code class=\"language-text\">80:80</code> to <code class=\"language-text\">8300:80</code> to avoid any possible collisions with IIS.</li>\n<li>Change the volumes mapping in the <em>Laravel Application Code Container</em> from <code class=\"language-text\">../:/var/www/laravel</code> to <code class=\"language-text\">../laravel/:/var/www/laravel</code>.</li>\n</ul>\n<p>We basically want the following in our project folder:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> laravel-basic-task-list>\n     laradock ~> git submodule\n     laravel ~> our laravel installation folder</code></pre></div>\n<p>We didn’t install anything yet so let’s just create an empty <code class=\"language-text\">laravel</code> folder:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PS MyUser\\Projects\\laravel-basic-task-list>mkdir laravel</code></pre></div>\n<h2>Firing up Docker</h2>\n<p>For the tutorial we need to list two containers: <strong>nginx</strong> and <strong>mysql</strong>.<br>\nLet’s move back to the laradock folder (since our docker-compose file is there) and create our containers:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PS MyUser\\Projects\\laravel-basic-task-list\\laradock>docker-compose up -d nginx mysql</code></pre></div>\n<p>This will create all the necessary container and run three containers in the background.<br>\nThese being nginx, mysql and the workspace container.<br>\nVerify this by using <em>docker-compose ps</em></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PS MyUser\\Projects\\laravel-basic-task-list\\laradock>docker-compose ps\nName                        Command             State                      Ports\n------------------------------------------------------------------------------------------------\nlaradock_mysql_1            docker-entrypoint.sh mysqld   Up       0.0.0.0:3306->3306/tcp\nlaradock_nginx_1            nginx                         Up       0.0.0.0:443->443/tcp, 0.0.0.0:8300->80/tcp\nlaradock_php-fpm_1          php-fpm                       Up       9000/tcp\nlaradock_volumes_data_1     true                          Exit 0\nlaradock_volumes_source_1   true                          Exit 0\nlaradock_workspace_1        /sbin/my_init                 Up</code></pre></div>\n<p>So far so good. If you now browse to <a href=\"http://localhost:8300\">http://localhost:8300</a> you should get a 404 page by Nginx.<br>\nThis is expected since we didn’t install anything yet.</p>\n<h2>Taking control</h2>\n<p>Ok, now let’s install Laravel using our workspace container.</p>\n<blockquote>\n<p>Enter the Workspace container, to execute commands like (Artisan, Composer, PHPUnit, Gulp, …).</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">PS MyUser\\Projects\\laravel-basic-task-list\\laradock>docker exec -it laradock_workspace_1 bash</code></pre></div>\n<p>Now we can run bash commands inside the workspace container. We’ll use Composer to create our new Laravel project.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@81acfe2e1e76:/var/www/laravel# composer create-project laravel/laravel .</code></pre></div>\n<p>This will install Laravel inside our laravel folder.<br>\nOpen up the project folder in a text editor. It should look somewhat like this:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 344px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3999ca3ce4427f46f77241bcfae4e85a/5f1e4/file-structure.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 243.3139534883721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAxCAIAAABVih7fAAAACXBIWXMAABJ0AAASdAHeZh94AAADiklEQVRIx5VW227bOBDt/39MXpx9CdKH7lOQIFi0tWMrsiRKlCiRFHW/yy72UOruNovGoQeQJcMenbmcOcNPjEX7/WG32+4PVtv142Bqfd9/apqGC5GmaVmW+N79Y/pxuS45V1X1/fvWtl9ZElMaBJR5HmFR5BMX3ziX4zi+64wbwMPFmqYuFtOgi30Q9vr0/Pz8x+0tgieB71Patt17gL9BpmEYRVFZFlmW1XXzoed/zm3b2rZ9PB6rqkTwRVmZOuPCX0+nk+s6X778CeRUpetvRsgw+FNKn56elFJZnuNd4ziZOuNpv9/f399LKaIw9H2S8ORy8G+QkyR5eXmp6yrPc3QLxbsCebvd3m42WaZcx0HPELlpn6dpEkJYltU2DTBXql6BvNvtNpsNi5jruscFHG+88Io3OTPGEDlGAtXuu96UYash5ru7uyRmvu+XZTXNs2nOwPE87/HxsVoYKqUE/mDYKhgAHx4eUG0hUTsBsozmzgj78+d7ODMWw67LeS0YtEGlSgh5Ratg8ESrwEpIyjRPpiO5GvJ0HAfIRQ4laa9z/vb1683NjUpT38NUiMEw535pVV3XccI18sJNUw3DDUyEj+sHmC0h5fnHeZ5P8zybkgTI8MQwInme8DiJueBGYU/jWFS1yxJoEEfBWRxGIfptgtwP4zSWxQ9nh5gxz8T3IMHAv0CVX6o9jn1TDyEBKwXnUDIEL1Np4IyqTtNQZPP+L8Y5RJh4JBZcF8xknlfkLg4xUiAZlKAoiytaBcl9OXosDO3DQSp1Pp91zEY5D6Pepy04UmUqQ8/ROSgZlpaR8zi081Cg1Z6D5XF0feJ5rlKFxv9d/P8jSZNwiXWVyhTVzoscwV9Yev/mrKU3Bz2jKFMp9anes5BRQlCIaRr7y8gaumkm54juBmHgh1RvrPlkTpKms+04TkKQkyeZxjTRbWzZaWqzrLAOjJKA4DxCiB9QGo5GYrAi60phNDAbHCSHpAyGzkNbzSrAmeTVtfFJiSNViojeY+ibVnU4CslYH0vyDA2rwJCmNaPnPGepeN0+It2DdQBJHL3rsgs1+xV5aJtOihIno3oxQBttjBW5qAfHElFEPSyegNiu3X08Vesw52qiTpovGsAljzl2rQHyT+1UZ8+iUC1s95AFhBqFvfjOkrNX6xvBIJHAdo6MhTgJm4i+PgRUZS5iqpcr9FYrCfZz+aHz3yey5PGG0gQQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"file structure\"\n        title=\"file structure\"\n        src=\"/static/3999ca3ce4427f46f77241bcfae4e85a/5f1e4/file-structure.png\"\n        srcset=\"/static/3999ca3ce4427f46f77241bcfae4e85a/00d96/file-structure.png 148w,\n/static/3999ca3ce4427f46f77241bcfae4e85a/0b23c/file-structure.png 295w,\n/static/3999ca3ce4427f46f77241bcfae4e85a/5f1e4/file-structure.png 344w\"\n        sizes=\"(max-width: 344px) 100vw, 344px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Browsing to <a href=\"http://localhost:8300\">http://localhost:8300</a> should return the Laravel welcome page.</p>\n<h2>Wiring up the database</h2>\n<p>Open the <em>.env</em> file. We need to tell Laravel that we are using the mysql container as MySql server.<br>\nSo change <code class=\"language-text\">DB_HOST=localhost</code> to <code class=\"language-text\">DB_HOST=mysql</code>.</p>\n<p>We can quickly check if this all works by running the default migrations</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@81acfe2e1e76:/var/www/laravel# php artisan migrate</code></pre></div>\n<p>At this point we are good to go to follow along the <a href=\"https://laravel.com/docs/5.2/quickstart#prepping-the-database\">tutorial</a>.</p>\n<h2>Connecting to the database</h2>\n<p>Assuming we completed the exercise, let’s take a look at our tasks table in the database.<br>\nExit the workspace container and enter the mysql container</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">root@81acfe2e1e76:/var/www/laravel# exit\nPS MyUser\\Projects\\laravel-basic-task-list\\laradock>docker exec -it laradock_mysql_1 bash\nroot@ebc73025ab6f:/# mysql --user=homestead --password=secret homestead</code></pre></div>\n<p>To view our tables:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> mysql> show tables;</code></pre></div>\n<p>(mind the <strong>;</strong>)</p>\n<p>Our tasks:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">mysql> select * from tasks;\n+----+---------+---------------------+---------------------+\n| id | name    | created_at          | updated_at          |\n+----+---------+---------------------+---------------------+\n|  2 | test    | 2016-08-15 19:23:07 | 2016-08-15 19:23:07 |\n|  4 | foobar  | 2016-08-15 19:23:15 | 2016-08-15 19:23:15 |\n|  5 | 2-tests | 2016-08-15 19:28:13 | 2016-08-15 19:28:13 |\n|  6 | Foobar  | 2016-08-16 16:43:47 | 2016-08-16 16:43:47 |\n+----+---------+---------------------+---------------------+</code></pre></div>\n<h2>Remarks</h2>\n<ul>\n<li>I’m using Docker 1.12.0 (stable) on the Windows 10 Anniversary Update</li>\n<li>I’m still learning Docker, PHP, Laravel, … so this is more <em>a</em> guide not the <em>ultimate guide</em>.</li>\n<li>I really, really like the fact that I didn’t have to install anything to get Laravel up and running</li>\n</ul>\n<h2>Final words</h2>\n<p>I hope you enjoyed this blogpost and it all makes sense. If you have any suggestions or questions please leave a comment.</p>\n<p>Yours truly,<br>\nnojaf</p>","frontmatter":{"title":"Running Laravel projects on Windows 10 using Docker","date":"2016-08-19","path":"2016/08/19/laradock-on-windows-10/","tags":["laravel","docker","php","laradock","how-to"],"cover":{"publicURL":"/static/nojaf-com-laradock-on-windows-10-banner-7149d9556b962a7920655f1df4557abf.jpg"}}}},"pageContext":{"slug":"/laradock-windows-10/","previous":{"fields":{"slug":"/leap-rxjs/"},"frontmatter":{"title":"A leap in RxJS","path":"2016/03/24/a-leap-in-rx-js/","tags":["javascript","rxjs"]}},"next":{"fields":{"slug":"/adventures-in-elm/"},"frontmatter":{"title":"Adventures in Elm","path":"2016/11/28/adventures-in-elm/","tags":["javascript","elm","fp"]}}}}}